/*! app-framework 29-07-2015 */
define("Nudoru.Component.CoachMarksView",function(a,b,c){function d(a){i=document.getElementById(a),k=_.template(p)}function e(a,b){m.push({targetSelector:a,id:l++,shape:null,label:null,props:b})}function f(){m.forEach(function(a,b){var c,d=document.querySelector(a.targetSelector),e=d.getBoundingClientRect(),f=s.HTMLStrToNode(k(a));a.shape=f,i.appendChild(a.shape),TweenLite.set(a.shape,{alpha:0,x:e.left-n,y:e.top-n,width:a.props.width||e.width+2*n,height:a.props.height||e.height+2*n}),c=q.add({title:"",content:a.props.label,position:a.props.labelPosition,targetEl:a.shape,width:a.props.labelWidth||o,gutter:3,alwaysVisible:!0,type:"coachmark"}),TweenLite.set(c,{alpha:0}),TweenLite.to([c,a.shape],1,{alpha:1,ease:Quad.easeOut,delay:.5*b})})}function g(){j=t.subscribe(u.MODAL_COVER_HIDE,h),r.show(!0),r.setOpacity(.25),f()}function h(){r.hide(!0),j.dispose(),j=null,m.forEach(function(a){TweenLite.killDelayedCallsTo(a.shape),q.remove(a.shape),i.removeChild(a.shape),delete a.shape})}var i,j,k,l=1,m=[],n=5,o=250,p='<div id="#js__coachmark-shape-<%= id%>" class="coachmark__shape-<%= props.shape%>"></div>',q=a("Nudoru.Component.ToolTipView"),r=a("Nudoru.Component.ModalCoverView"),s=a("Nudoru.Browser.DOMUtils"),t=a("Nudoru.Component.Dispatcher"),u=a("Nudoru.Component.ComponentEvents");c.initialize=d,c.outlineElement=e,c.show=g,c.hide=h}),define("Nudoru.Component.Dispatcher",function(a,b,c){function d(a,b,c){return h[a]||(h[a]=[]),h[a]={once:c,handler:b,subject:new Rx.Subject},h[a].subject.subscribe(b)}function e(b,c,e){var f=a(c);if(f.hasOwnProperty("execute"))return d(b,f.execute,e);throw new Error("Emitter cannot map "+b+" to command "+c+": must have execute()")}function f(a,b){var c=h[a];c&&(c.subject.onNext(b),c.once&&(c.subject.onCompleted(),c.subject.dispose(),c=null))}function g(){var a=h;for(var b in a)hasOwnProp.call(a,b)&&a[b].subject.dispose();h={}}var h={};c.subscribe=d,c.subscribeCommand=e,c.publish=f,c.dispose=g}),define("Nudoru.Component.ComponentEvents",function(a,b,c){c.MODAL_COVER_SHOW="MODAL_COVER_SHOW",c.MODAL_COVER_HIDE="MODAL_COVER_HIDE",c.MENU_SELECT="MENU_SELECT"}),define("Nudoru.Component.Templating",function(a,b,c){function d(a){if(i[a])return i[a];var b=document.getElementById(a),c="",d="";if(!b)throw new Error('Nudoru.Core.NTemplate, template not found: "'+a+'"');return c=b.innerHTML,d=h(c),i[a]=d,d}function e(a){if(j[a])return j[a];var b=_.template(d(a));return j[a]=b,b}function f(a,b){var c=e(a);return c(b)}function g(a,b){return k.HTMLStrToNode(f(a,b))}function h(a){return a.trim()}var i=Object.create(null),j=Object.create(null),k=a("Nudoru.Browser.DOMUtils");c.getSource=d,c.getTemplate=e,c.asHTML=f,c.asElement=g}),define("Nudoru.Component.ComponentViewUtils",function(a,b,c){function d(a){TweenLite.set(a,{css:{perspective:800,perspectiveOrigin:"50% 50%"}})}function e(a){TweenLite.set(a,{css:{transformStyle:"preserve-3d",backfaceVisibility:"hidden",transformOrigin:"50% 50%"}})}function f(a){TweenLite.set(a,{css:{transformStyle:"preserve-3d",backfaceVisibility:"hidden",transformPerspective:600,transformOrigin:"50% 50%"}})}c.apply3DToContainer=d,c.apply3DToComponentElement=e,c.applyUnique3DToComponentElement=f}),define("Nudoru.Component.MessageBoxCreator",function(a,b,c){function d(a,b,c,d){return h.add({title:a,content:"<p>"+b+"</p>",type:h.type().DANGER,modal:c,width:400,buttons:[{label:"Close",id:"Close",type:"",icon:"times",onClick:d}]})}function e(a,b,c,d){return h.add({title:a,content:"<p>"+b+"</p>",type:h.type().DEFAULT,modal:d,width:400,buttons:[{label:"Cancel",id:"Cancel",type:"negative",icon:"times"},{label:"Proceed",id:"proceed",type:"positive",icon:"check",onClick:c}]})}function f(a,b,c,d){return h.add({title:a,content:'<p class="text-center padding-bottom-double">'+b+'</p><textarea name="response" class="input-text" type="text" style="width:400px; height:75px; resize: none" autofocus="true"></textarea>',type:h.type().DEFAULT,modal:d,width:450,buttons:[{label:"Cancel",id:"Cancel",type:"negative",icon:"times"},{label:"Proceed",id:"proceed",type:"positive",icon:"check",onClick:c}]})}function g(a,b,c,d,e){var f='<select class="spaced" style="width:450px;height:200px" name="selection" autofocus="true" size="20">';return c.forEach(function(a){f+='<option value="'+a.value+'" '+("true"===a.selected?"selected":"")+">"+a.label+"</option>"}),f+="</select>",h.add({title:a,content:'<p class="text-center padding-bottom-double">'+b+'</p><div class="text-center">'+f+"</div>",type:h.type().DEFAULT,modal:e,width:500,buttons:[{label:"Cancel",id:"Cancel",type:"negative",icon:"times"},{label:"OK",id:"ok",type:"positive",icon:"check",onClick:d}]})}var h=a("Nudoru.Component.MessageBoxView");c.alert=d,c.confirm=e,c.prompt=f,c.choice=g}),define("Nudoru.Component.MessageBoxView",function(a,b,c){function d(a){q=document.getElementById(a)}function e(a){var b=a.type||v.DEFAULT,c=g(a);return r.push(c),q.appendChild(c.element),f(b,c.element),h(c),D.applyUnique3DToComponentElement(c.element),TweenLite.set(c.element,{css:{zIndex:t,width:a.width?a.width:u}}),C.centerElementInViewPort(c.element),Draggable.create("#"+c.id,{bounds:window,onPress:function(){t=Draggable.zIndex}}),k(c.element),a.modal&&A.showNonDismissable(!0),c.id}function f(a,b){"default"!==a&&C.addClass(b,w[a])}function g(a){var b="js__messagebox-"+(s++).toString(),c={dataObj:a,id:b,modal:a.modal,element:z.asElement("template__messagebox--default",{id:b,title:a.title,content:a.content}),streams:[]};return c}function h(a){var b=a.dataObj.buttons;b||(b=[{label:"Close",type:"",icon:"times",id:"default-close"}]);var c=a.element.querySelector(".footer-buttons");C.removeAllElements(c),b.forEach(function(b){b.id=a.id+"-button-"+b.id;var d;d=b.hasOwnProperty("icon")?z.asElement(x,b):z.asElement(y,b),c.appendChild(d);var e=Rx.Observable.fromEvent(d,B.mouseClickEvtStr()).subscribe(function(){b.hasOwnProperty("onClick")&&b.onClick&&b.onClick.call(this,i(a.id)),j(a.id)});a.streams.push(e)})}function i(a){return C.captureFormData(p(a).element)}function j(a){var b,c=o(a);c>-1&&(b=r[c],l(b.element))}function k(a){TweenLite.to(a,0,{alpha:0,rotationX:45,scale:2}),TweenLite.to(a,.5,{alpha:1,rotationX:0,scale:1,ease:Circ.easeOut})}function l(a){TweenLite.to(a,.25,{alpha:0,rotationX:-45,scale:.25,ease:Circ.easeIn,onComplete:function(){m(a)}})}function m(a){var b=o(a.getAttribute("id")),c=r[b];c.streams.forEach(function(a){a.dispose()}),Draggable.get("#"+c.id).disable(),q.removeChild(a),r[b]=null,r.splice(b,1),n()}function n(){var a=!1;r.forEach(function(b){b.modal===!0&&(a=!0)}),a||A.hide(!0)}function o(a){return r.map(function(a){return a.id}).indexOf(a)}function p(a){return r.filter(function(b){return b.id===a})[0]}var q,r=[],s=0,t=1e3,u=400,v={DEFAULT:"default",INFORMATION:"information",SUCCESS:"success",WARNING:"warning",DANGER:"danger"},w={"default":"",information:"messagebox__information",success:"messagebox__success",warning:"messagebox__warning",danger:"messagebox__danger"},x="template__messagebox--button-icon",y="template__messagebox--button-noicon",z=a("Nudoru.Component.Templating"),A=a("Nudoru.Component.ModalCoverView"),B=a("Nudoru.Browser.BrowserInfo"),C=a("Nudoru.Browser.DOMUtils"),D=a("Nudoru.Component.ComponentViewUtils");c.initialize=d,c.add=e,c.remove=j,c.type=function(){return v}}),define("Nudoru.Component.ModalCoverView",function(a,b,c){function d(){q=!0,m=s.getElementById("modal__cover"),n=s.querySelector(".modal__background"),o=s.querySelector(".modal__close-button");var a=Rx.Observable.fromEvent(n,v.mouseClickEvtStr()),b=Rx.Observable.fromEvent(o,v.mouseClickEvtStr());p=Rx.Observable.merge(a,b).subscribe(function(){f()}),j(!1)}function e(){return q}function f(){r||j(!0)}function g(a){q=!0;var b=a?.25:0;TweenLite.to(m,b,{autoAlpha:1,ease:Quad.easeOut}),TweenLite.to(n,b,{alpha:1,ease:Quad.easeOut})}function h(a){q||(r=!1,g(a),TweenLite.set(o,{scale:2,alpha:0}),TweenLite.to(o,1,{autoAlpha:1,scale:1,ease:Bounce.easeOut,delay:1}),t.publish(u.MODAL_COVER_SHOW))}function i(a){q||(r=!0,g(a),TweenLite.to(o,0,{autoAlpha:0}))}function j(a){if(q){q=!1,r=!1;var b=a?.25:0;TweenLite.killDelayedCallsTo(o),TweenLite.to(m,b,{autoAlpha:0,ease:Quad.easeOut}),TweenLite.to(o,b/2,{autoAlpha:0,ease:Quad.easeOut}),t.publish(u.MODAL_COVER_HIDE)}}function k(a){(0>a||a>1)&&(console.log("Nudoru.Component.ModalCoverView: setOpacity: opacity should be between 0 and 1"),a=1),TweenLite.to(n,.25,{alpha:a,ease:Quad.easeOut})}function l(a,b,c){TweenLite.to(n,.25,{backgroundColor:"rgb("+a+","+b+","+c+")",ease:Quad.easeOut})}var m,n,o,p,q,r,s=document,t=a("Nudoru.Component.Dispatcher"),u=a("Nudoru.Component.ComponentEvents"),v=a("Nudoru.Browser.BrowserInfo");c.initialize=d,c.show=h,c.showNonDismissable=i,c.hide=j,c.visible=e,c.setOpacity=k,c.setColor=l}),define("Nudoru.Component.ToastView",function(a,b,c){function d(a){n=document.getElementById(a)}function e(a){a.type=a.type||r.DEFAULT;var b=g(a.title,a.message);o.push(b),n.insertBefore(b.element,n.firstChild),f(a.type,b.element),w.apply3DToContainer(n),w.apply3DToComponentElement(b.element);var c=b.element.querySelector(".toast__item-controls > button"),d=Rx.Observable.fromEvent(c,u.mouseClickEvtStr()),e=Rx.Observable.interval(q);return b.defaultButtonStream=Rx.Observable.merge(d,e).take(1).subscribe(function(){h(b.id)}),i(b.element),b.id}function f(a,b){"default"!==a&&v.addClass(b,s[a])}function g(a,b){var c="js__toast-toastitem-"+(p++).toString(),d={id:c,element:t.asElement("template__component--toast",{id:c,title:a,message:b}),defaultButtonStream:null};return d}function h(a){var b,c=m(a);c>-1&&(b=o[c],l(c),j(b.element))}function i(a){TweenLite.to(a,0,{alpha:0}),TweenLite.to(a,1,{alpha:1,ease:Quad.easeOut}),l()}function j(a){TweenLite.to(a,.25,{rotationX:-45,alpha:0,ease:Quad.easeIn,onComplete:function(){k(a)}})}function k(a){var b=m(a.getAttribute("id")),c=o[b];c.defaultButtonStream.dispose(),n.removeChild(a),o[b]=null,o.splice(b,1)}function l(a){for(var b,c=o.length-1,d=0;c>-1;c--)c!==a&&(b=o[c],TweenLite.to(b.element,.75,{y:d,ease:Bounce.easeOut}),d+=10+b.element.clientHeight)}function m(a){return o.map(function(a){return a.id}).indexOf(a)}var n,o=[],p=0,q=7e3,r={DEFAULT:"default",INFORMATION:"information",SUCCESS:"success",WARNING:"warning",DANGER:"danger"},s={"default":"",information:"toast__information",success:"toast__success",warning:"toast__warning",danger:"toast__danger"},t=a("Nudoru.Component.Templating"),u=a("Nudoru.Browser.BrowserInfo"),v=a("Nudoru.Browser.DOMUtils"),w=a("Nudoru.Component.ComponentViewUtils");c.initialize=d,c.add=e,c.remove=h,c.type=function(){return r}}),define("Nudoru.Component.ToolTipView",function(a,b,c){function d(a){t=document.getElementById(a)}function e(a){a.type=a.type||x.DEFAULT;var b=g(a.title,a.content,a.position,a.targetEl,a.gutter,a.alwaysVisible);return u.push(b),t.appendChild(b.element),b.arrowEl=b.element.querySelector(".arrow"),f(a.type,a.position,b.element),TweenLite.set(b.element,{css:{autoAlpha:b.alwaysVisible?1:0,width:a.width?a.width:w}}),b.width=b.element.getBoundingClientRect().width,b.height=b.element.getBoundingClientRect().height,h(b),j(b),(b.position===z.L||b.position===z.R)&&l(b),(b.position===z.T||b.position===z.B)&&k(b),b.element}function f(a,b,c){"default"!==a&&C.addClass(c,y[a]),C.addClass(c,A[b])}function g(a,b,c,d,e,f){var g="js__tooltip-tooltipitem-"+(v++).toString(),h={id:g,position:c,targetEl:d,alwaysVisible:f||!1,gutter:e||15,elOverStream:null,elOutStream:null,height:0,width:0,element:B.asElement("template__component--tooltip",{id:g,title:a,message:b}),arrowEl:null};return h}function h(a){a.alwaysVisible||(a.elOverStream=Rx.Observable.fromEvent(a.targetEl,"mouseover").subscribe(function(){i(a.id)}),a.elOutStream=Rx.Observable.fromEvent(a.targetEl,"mouseout").subscribe(function(){m(a.id)}))}function i(a){var b=q(a);b.alwaysVisible||(j(b),n(b.element))}function j(a){var b=a.gutter,c=0,d=0,e=a.targetEl.getBoundingClientRect();a.position===z.TL?(c=e.left-a.width,d=e.top-a.height):a.position===z.T?(c=e.left+(e.width/2-a.width/2),d=e.top-a.height-b):a.position===z.TR?(c=e.right,d=e.top-a.height):a.position===z.R?(c=e.right+b,d=e.top+(e.height/2-a.height/2)):a.position===z.BR?(c=e.right,d=e.bottom):a.position===z.B?(c=e.left+(e.width/2-a.width/2),d=e.bottom+b):a.position===z.BL?(c=e.left-a.width,d=e.bottom):a.position===z.L&&(c=e.left-a.width-b,d=e.top+(e.height/2-a.height/2)),TweenLite.set(a.element,{x:c,y:d})}function k(a){var b=a.arrowEl.getBoundingClientRect();TweenLite.set(a.arrowEl,{x:a.width/2-b.width/2})}function l(a){var b=a.arrowEl.getBoundingClientRect();TweenLite.set(a.arrowEl,{y:a.height/2-b.height/2-2})}function m(a){var b=q(a);b.alwaysVisible||o(b.element)}function n(a){TweenLite.to(a,.5,{autoAlpha:1,ease:Circ.easeOut})}function o(a){TweenLite.to(a,.05,{autoAlpha:0,ease:Circ.easeOut})}function p(a){s(a).forEach(function(a){a.elOverStream&&a.elOverStream.dispose(),a.elOutStream&&a.elOutStream.dispose(),TweenLite.killDelayedCallsTo(a.element),t.removeChild(a.element);var b=r(a.id);u[b]=null,u.splice(b,1)})}function q(a){return u.filter(function(b){return b.id===a})[0]}function r(a){return u.map(function(a){return a.id}).indexOf(a)}function s(a){return u.filter(function(b){return b.targetEl===a})}var t,u=[],v=0,w=200,x={DEFAULT:"default",INFORMATION:"information",SUCCESS:"success",WARNING:"warning",DANGER:"danger",COACHMARK:"coachmark"},y={"default":"",information:"tooltip__information",success:"tooltip__success",warning:"tooltip__warning",danger:"tooltip__danger",coachmark:"tooltip__coachmark"},z={T:"T",TR:"TR",R:"R",BR:"BR",B:"B",BL:"BL",L:"L",TL:"TL"},A={T:"tooltip__top",TR:"tooltip__topright",R:"tooltip__right",BR:"tooltip__bottomright",B:"tooltip__bottom",BL:"tooltip__bottomleft",L:"tooltip__left",TL:"tooltip__topleft"},B=a("Nudoru.Component.Templating"),C=a("Nudoru.Browser.DOMUtils");c.initialize=d,c.add=e,c.remove=p,c.type=function(){return x},c.position=function(){return z}});