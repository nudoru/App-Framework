{"version":3,"sources":["Cookie.js","Dispatcher.js","Keyboard.js","MixinObservableSubject.js","Renderer.js","Router.js","Rx.js","Templating.js","ActionConstants.js","ActionCreator.js","Rest.js","SocketIO.js","Map.js","MapCollection.js","MixinMapFactory.js","MixinReducerStore.js","SimpleStore.js","ApplicationView.js","MixinBrowserEvents.js","MixinComponentViews.js","MixinEventDelegator.js","MixinModelStateViews.js","MixinNudoruControls.js","MixinRouteViews.js","ViewComponent.js","Nori.js"],"names":[],"mappings":"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","file":"nori.js","sourcesContent":["ndefine('nori/utils/Cookie',\n  function (nrequire, module, exports) {\n\n    var Cookie = function () {\n\n      function create(name, value, days) {\n        var expires = \"\", date;\n        if (days) {\n          date    = new Date();\n          date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));\n          expires = \"; expires=\" + date.toGMTString();\n        }\n        document.cookie = name + \"=\" + value + expires + \"; path=/\";\n      }\n\n      function read(name) {\n        var nameEQ = name + \"=\",\n            ca     = document.cookie.split(';'),\n            i, c;\n\n        i = ca.length;\n        while (i--) {\n          c = ca[i];\n          while (c.charAt(0) === ' ') {\n            c = c.substring(1, c.length);\n          }\n          if (c.indexOf(nameEQ) === 0) {\n            return c.substring(nameEQ.length, c.length);\n          }\n        }\n        return null;\n      }\n\n      function remove(name) {\n        create(name, '', -1);\n      }\n\n      return {\n        create: create,\n        read  : read,\n        remove: remove\n      };\n\n    };\n\n    module.exports = Cookie();\n\n  });","/*\n Matt Perkins, 6/12/15\n\n publish payload object\n\n {\n type: EVT_TYPE,\n payload: {\n key: value\n }\n }\n\n */\n\nndefine('nori/utils/Dispatcher',\n  function (nrequire, module, exports) {\n\n    var Dispatcher = function () {\n\n      var _subjectMap  = {},\n          _receiverMap = {},\n          _id          = 0,\n          _log         = [],\n          _queue       = [],\n          _timerObservable,\n          _timerSubscription,\n          _timerPausable;\n\n      /**\n       * Add an event as observable\n       * @param evtStr Event name string\n       * @param handler onNext() subscription function\n       * @param onceOrContext optional, either the context to execute the hander or once bool\n       * @param once will complete/dispose after one fire\n       * @returns {*}\n       */\n      function subscribe(evtStr, handler, onceOrContext, once) {\n        var handlerContext = window;\n\n        //console.log('dispatcher subscribe', evtStr, handler, onceOrContext, once);\n\n        if (is.falsey(evtStr)) {\n          console.warn('Dispatcher: Fasley event string passed for handler', handler);\n        }\n\n        if (is.falsey(handler)) {\n          console.warn('Dispatcher: Fasley handler passed for event string', evtStr);\n        }\n\n        if (onceOrContext || onceOrContext === false) {\n          if (onceOrContext === true || onceOrContext === false) {\n            once = onceOrContext;\n          } else {\n            handlerContext = onceOrContext;\n          }\n        }\n\n        if(!_subjectMap[evtStr]) {\n          _subjectMap[evtStr] = [];\n        }\n\n        var subject = new Rx.Subject();\n\n        _subjectMap[evtStr].push({\n          once    : once,\n          priority: 0,\n          handler : handler,\n          context : handlerContext,\n          subject : subject,\n          type    : 0\n        });\n\n        return subject.subscribe(handler.bind(handlerContext));\n      }\n\n      /**\n       * Initialize the event processing timer or resume a paused timer\n       */\n      function initTimer() {\n        if (_timerObservable) {\n          _timerPausable.onNext(true);\n          return;\n        }\n\n        _timerPausable     = new Rx.Subject();\n        _timerObservable   = Rx.Observable.interval(1).pausable(_timerPausable);\n        _timerSubscription = _timerObservable.subscribe(processNextEvent);\n      }\n\n      /**\n       * Shift next event to handle off of the queue and dispatch it\n       */\n      function processNextEvent() {\n        var evt = _queue.shift();\n        if (evt) {\n          dispatchToReceivers(evt);\n          dispatchToSubscribers(evt);\n        } else {\n          _timerPausable.onNext(false);\n        }\n      }\n\n      /**\n       * Push event to the stack and begin execution\n       * @param payloadObj type:String, payload:data\n       * @param data\n       */\n      function publish(payloadObj) {\n        _log.push(payloadObj);\n        _queue.push(payloadObj);\n\n        initTimer();\n      }\n\n      /**\n       * Send the payload to all receivers\n       * @param payload\n       */\n      function dispatchToReceivers(payload) {\n        for (var id in _receiverMap) {\n          _receiverMap[id].handler(payload);\n        }\n      }\n\n      /**\n       * Subscribers receive all payloads for a given event type while handlers are targeted\n       * @param payload\n       */\n      function dispatchToSubscribers(payload) {\n        var subscribers = _subjectMap[payload.type], i;\n        if (!subscribers) {\n          return;\n        }\n\n        i = subscribers.length;\n\n        while (i--) {\n          var subjObj = subscribers[i];\n          if (subjObj.type === 0) {\n            subjObj.subject.onNext(payload);\n          }\n          if (subjObj.once) {\n            unsubscribe(payload.type, subjObj.handler);\n          }\n        }\n      }\n\n      /**\n       * Remove a handler\n       * @param evtStr\n       * @param hander\n       */\n      function unsubscribe(evtStr, handler) {\n        if (_subjectMap[evtStr] === undefined) {\n          return;\n        }\n\n        var subscribers = _subjectMap[evtStr],\n            handlerIdx  = -1;\n\n        for (var i = 0, len = subscribers.length; i < len; i++) {\n          if (subscribers[i].handler === handler) {\n            handlerIdx     = i;\n            subscribers[i].subject.onCompleted();\n            subscribers[i].subject.dispose();\n            subscribers[i] = null;\n          }\n        }\n\n        if (handlerIdx === -1) {\n          return;\n        }\n\n        subscribers.splice(handlerIdx, 1);\n\n        if (subscribers.length === 0) {\n          delete _subjectMap[evtStr];\n        }\n      }\n\n      /**\n       * Return a copy of the log array\n       * @returns {Array.<T>}\n       */\n      function getLog() {\n        return _log.slice(0);\n      }\n\n\n      /**\n       * Simple receiver implementation based on Flux\n       * Registered receivers will get every published event\n       * https://github.com/facebook/flux/blob/master/src/Dispatcher.js\n       *\n       * Usage:\n       *\n       * _dispatcher.registerReceiver(function (payload) {\n       *    console.log('receiving, ',payload);\n       * });\n       *\n       * @param handler\n       * @returns {string}\n       */\n      function registerReceiver(handler) {\n        var id           = 'ID_' + _id++;\n        _receiverMap[id] = {\n          id     : id,\n          handler: handler\n        };\n        return id;\n      }\n\n\n      /**\n       * Remove a receiver handler\n       * @param id\n       */\n      function unregisterReceiver(id) {\n        if (_receiverMap.hasOwnProperty(id)) {\n          delete _receiverMap[id];\n        }\n      }\n\n      return {\n        subscribe         : subscribe,\n        unsubscribe       : unsubscribe,\n        publish           : publish,\n        getLog            : getLog,\n        registerReceiver  : registerReceiver,\n        unregisterReceiver: unregisterReceiver\n      };\n\n    };\n\n    module.exports = Dispatcher();\n\n  });","ndefine('nori/utils/Keyboard',\n  function (nrequire, module, exports) {\n\n    /**\n     * Maps keyboard presses to a handler function\n     * Dependencies: RxJS\n     *\n     * TODO Implement modifiers\n     *\n     * Example\n     var Keyboard = nrequire('nori/utils/Keyboard'),\n     kb = Keyboard();\n     kb.initialize();\n     kb.mapKey(['a','b'],function(key){\n          console.log('Pressed: '+key);\n          kb.unmapKey(['b']);\n        });\n     */\n\n    var Keyboard = function () {\n\n      var _callbackMap = {},\n          _subscription,\n          _keyCodes    = {\n            'backspace'       : '8',\n            'tab'             : '9',\n            'enter'           : '13',\n            'shift'           : '16',\n            'ctrl'            : '17',\n            'alt'             : '18',\n            'pause_break'     : '19',\n            'caps_lock'       : '20',\n            'escape'          : '27',\n            'page_up'         : '33',\n            'page down'       : '34',\n            'end'             : '35',\n            'home'            : '36',\n            'left'            : '37',\n            'up'              : '38',\n            'right'           : '39',\n            'down'            : '40',\n            'insert'          : '45',\n            'delete'          : '46',\n            '0'               : '48',\n            '1'               : '49',\n            '2'               : '50',\n            '3'               : '51',\n            '4'               : '52',\n            '5'               : '53',\n            '6'               : '54',\n            '7'               : '55',\n            '8'               : '56',\n            '9'               : '57',\n            'a'               : '65',\n            'b'               : '66',\n            'c'               : '67',\n            'd'               : '68',\n            'e'               : '69',\n            'f'               : '70',\n            'g'               : '71',\n            'h'               : '72',\n            'i'               : '73',\n            'j'               : '74',\n            'k'               : '75',\n            'l'               : '76',\n            'm'               : '77',\n            'n'               : '78',\n            'o'               : '79',\n            'p'               : '80',\n            'q'               : '81',\n            'r'               : '82',\n            's'               : '83',\n            't'               : '84',\n            'u'               : '85',\n            'v'               : '86',\n            'w'               : '87',\n            'x'               : '88',\n            'y'               : '89',\n            'z'               : '90',\n            'left_window key' : '91',\n            'right_window key': '92',\n            'select_key'      : '93',\n            'numpad 0'        : '96',\n            'numpad 1'        : '97',\n            'numpad 2'        : '98',\n            'numpad 3'        : '99',\n            'numpad 4'        : '100',\n            'numpad 5'        : '101',\n            'numpad 6'        : '102',\n            'numpad 7'        : '103',\n            'numpad 8'        : '104',\n            'numpad 9'        : '105',\n            'multiply'        : '106',\n            'add'             : '107',\n            'subtract'        : '109',\n            'decimal point'   : '110',\n            'divide'          : '111',\n            'f1'              : '112',\n            'f2'              : '113',\n            'f3'              : '114',\n            'f4'              : '115',\n            'f5'              : '116',\n            'f6'              : '117',\n            'f7'              : '118',\n            'f8'              : '119',\n            'f9'              : '120',\n            'f10'             : '121',\n            'f11'             : '122',\n            'f12'             : '123',\n            'num_lock'        : '144',\n            'scroll_lock'     : '145',\n            'semi_colon'      : '186',\n            'equal_sign'      : '187',\n            'comma'           : '188',\n            'dash'            : '189',\n            'period'          : '190',\n            'forward_slash'   : '191',\n            'grave_accent'    : '192',\n            'open_bracket'    : '219',\n            'backslash'       : '220',\n            'closebracket'    : '221',\n            'single_quote'    : '222'\n          };\n\n      /**\n       * Initialize\n       * @param context On which element to listen for key preses on\n       * @param evt 'keydown' or 'keyup'\n       */\n      function initialize(context, evt) {\n\n        context = context || document;\n        evt     = evt || 'keydown';\n\n        var source = Rx.Observable.fromEvent(context, evt);\n\n        _subscription = source.map(function (evt) {\n          return evt.keyCode;\n        }).map(function (code) {\n          return getKeyNameFromCode(code);\n        }).subscribe(handleKeyDown);\n\n      }\n\n      /**\n       * Returns the keymap\n       * @returns {void|*}\n       */\n      function getKeyCodes() {\n        return _.assign({}, _keyCodes);\n      }\n\n      /**\n       * Determines if the key is present in the map\n       * @param key\n       * @returns {boolean}\n       */\n      function isValid(key) {\n        return _keyCodes.hasOwnProperty(key);\n      }\n\n      /**\n       * Maps a string key or array to callback function\n       * @param key string or array\n       * @param callback function to execute when pressed\n       * @param context scope to execute\n       */\n      function mapKey(key, callback, context) {\n        if (typeof key === 'string') {\n          key = [key];\n        }\n\n        key.forEach(function (k) {\n          addKeyCallBack(k, callback, context);\n        });\n      }\n\n      function addKeyCallBack(key, callback, context) {\n        if (isValid(key)) {\n          context           = context || window;\n          _callbackMap[key] = callback.bind(context);\n        }\n      }\n\n      /**\n       * Removes a mapping\n       * @param key string or array\n       */\n      function unmapKey(key) {\n        if (typeof key === 'string') {\n          key = [key];\n        }\n\n        key.forEach(function (k) {\n          removeKeyCallBack(k);\n        });\n      }\n\n      function removeKeyCallBack(key) {\n        delete _callbackMap[key];\n      }\n\n      /**\n       * Execute the callback for a key\n       * @param code\n       */\n      function handleKeyDown(code) {\n        if (_callbackMap.hasOwnProperty(code)) {\n          _callbackMap[code](code);\n        }\n      }\n\n      /**\n       * Gets the name for the key from the key map\n       * @param code\n       * @returns {*}\n       */\n      function getKeyNameFromCode(code) {\n        for (var keyname in _keyCodes) {\n          if (_keyCodes[keyname] === ('' + code)) {\n            return keyname;\n          }\n        }\n        return undefined;\n      }\n\n      function dispose() {\n        _callbackMap = undefined;\n        _subscription.dispose();\n      }\n\n      return {\n        initialize : initialize,\n        getKeyCodes: getKeyCodes,\n        mapKey     : mapKey,\n        unmapKey   : unmapKey,\n        dispose    : dispose\n      };\n\n    };\n\n    module.exports = Keyboard;\n\n  });\n","/**\n * Add RxJS Subject to a module.\n *\n * Add one simple observable subject or more complex ability to create others for\n * more complex eventing needs.\n */\n\nndefine('nori/utils/MixinObservableSubject',\n\n  function (nrequire, module, exports) {\n\n    var MixinObservableSubject = function () {\n\n      var _subject    = new Rx.Subject(),\n          _subjectMap = {};\n\n      /**\n       * Create a new subject\n       * @param name\n       * @returns {*}\n       */\n      function createSubject(name) {\n        if (!_subjectMap.hasOwnProperty(name)) {\n          _subjectMap[name] = new Rx.Subject();\n        }\n        return _subjectMap[name];\n      }\n\n      /**\n       * Subscribe handler to updates. If the handler is a string, the new subject\n       * will be created.\n       * @param handler\n       * @returns {*}\n       */\n      function subscribe(handlerOrName, optHandler) {\n        if (is.string(handlerOrName)) {\n          return createSubject(handlerOrName).subscribe(optHandler);\n        } else {\n          return _subject.subscribe(handlerOrName);\n        }\n      }\n\n      /**\n       * Dispatch updated to subscribers\n       * @param payload\n       */\n      function notifySubscribers(payload) {\n        _subject.onNext(payload);\n      }\n\n      /**\n       * Dispatch updated to named subscribers\n       * @param name\n       * @param payload\n       */\n      function notifySubscribersOf(name, payload) {\n        if (_subjectMap.hasOwnProperty(name)) {\n          _subjectMap[name].onNext(payload);\n        } else {\n          console.warn('MixinObservableSubject, no subscribers of ' + name);\n        }\n      }\n\n      return {\n        subscribe            : subscribe,\n        createSubject        : createSubject,\n        notifySubscribers    : notifySubscribers,\n        notifySubscribersOf  : notifySubscribersOf\n      };\n\n    };\n\n    module.exports = MixinObservableSubject;\n\n  });","/**\n * Utility to handle all view DOM attachment tasks\n */\n\nndefine('nori/utils/Renderer',\n  function (nrequire, module, exports) {\n\n    var Renderer = function () {\n      var _domUtils = nrequire('nudoru/browser/DOMUtils');\n\n      function render(payload) {\n        var targetSelector = payload.target,\n            html           = payload.html,\n            domEl,\n            mountPoint     = document.querySelector(targetSelector),\n            cb             = payload.callback;\n\n        mountPoint.innerHTML = '';\n\n        if (html) {\n          domEl = _domUtils.HTMLStrToNode(html);\n          mountPoint.appendChild(domEl);\n        }\n\n        if (cb) {\n          cb(domEl);\n        }\n\n        return domEl;\n      }\n\n      return {\n        render: render\n      };\n\n    };\n\n    module.exports = Renderer();\n\n  });","/**\n * Simple router\n * Supporting IE9 so using hashes instead of the history API for now\n */\n\nndefine('nori/utils/Router',\n  function (nrequire, module, exports) {\n\n    var Router = function () {\n\n      var _subject  = new Rx.Subject(),\n          _hashChangeObservable,\n          _objUtils = nrequire('nudoru/core/ObjectUtils');\n\n      /**\n       * Set event handlers\n       */\n      function initialize() {\n        _hashChangeObservable = Rx.Observable.fromEvent(window, 'hashchange').subscribe(notifySubscribers);\n      }\n\n      /**\n       * subscribe a handler to the url change events\n       * @param handler\n       * @returns {*}\n       */\n      function subscribe(handler) {\n        return _subject.subscribe(handler);\n      }\n\n      /**\n       * Notify of a change in route\n       * @param fromApp True if the route was caused by an app event not URL or history change\n       */\n      function notifySubscribers() {\n        var eventPayload = {\n          routeObj: getCurrentRoute(), // { route:, data: }\n          fragment: getURLFragment()\n        };\n\n        _subject.onNext(eventPayload);\n      }\n\n      /**\n       * Parses the route and query string from the current URL fragment\n       * @returns {{route: string, query: {}}}\n       */\n      function getCurrentRoute() {\n        var fragment    = getURLFragment(),\n            parts       = fragment.split('?'),\n            route       = '/' + parts[0],\n            queryStr    = decodeURIComponent(parts[1]),\n            queryStrObj = parseQueryStr(queryStr);\n\n        if (queryStr === '=undefined') {\n          queryStrObj = {};\n        }\n\n        return {route: route, data: queryStrObj};\n      }\n\n      /**\n       * Parses a query string into key/value pairs\n       * @param queryStr\n       * @returns {{}}\n       */\n      function parseQueryStr(queryStr) {\n        var obj   = {},\n            parts = queryStr.split('&');\n\n        parts.forEach(function (pairStr) {\n          var pairArr     = pairStr.split('=');\n          obj[pairArr[0]] = pairArr[1];\n        });\n\n        return obj;\n      }\n\n      /**\n       * Combines a route and data object into a proper URL hash fragment\n       * @param route\n       * @param dataObj\n       */\n      function set(route, dataObj) {\n        var path = route,\n            data = [];\n        if (!_objUtils.isNull(dataObj)) {\n          path += \"?\";\n          for (var prop in dataObj) {\n            if (prop !== 'undefined' && dataObj.hasOwnProperty(prop)) {\n              data.push(prop + '=' + encodeURIComponent(dataObj[prop]));\n            }\n          }\n          path += data.join('&');\n        }\n\n        updateURLFragment(path);\n      }\n\n      /**\n       * Returns everything after the 'whatever.html#' in the URL\n       * Leading and trailing slashes are removed\n       * @returns {string}\n       */\n      function getURLFragment() {\n        var fragment = location.hash.slice(1);\n        return fragment.toString().replace(/\\/$/, '').replace(/^\\//, '');\n      }\n\n      /**\n       * Set the URL hash fragment\n       * @param path\n       */\n      function updateURLFragment(path) {\n        window.location.hash = path;\n      }\n\n      return {\n        initialize       : initialize,\n        subscribe        : subscribe,\n        notifySubscribers: notifySubscribers,\n        getCurrentRoute  : getCurrentRoute,\n        set              : set\n      };\n\n    };\n\n    var r = Router();\n    r.initialize();\n\n    module.exports = r;\n\n  });","ndefine('nori/utils/Rx',\n  function (nrequire, module, exports) {\n\n    module.exports = {\n      dom: function (selector, event) {\n        var el = document.querySelector(selector);\n        if (!el) {\n          console.warn('nori/utils/Rx, dom, invalid DOM selector: ' + selector);\n          return;\n        }\n        return Rx.Observable.fromEvent(el, event.trim());\n      },\n\n      from: function (ittr) {\n        return Rx.Observable.from(ittr);\n      },\n\n      interval: function (ms) {\n        return Rx.Observable.interval(ms);\n      },\n\n      doEvery: function(ms, handler) {\n        return this.interval(ms).subscribe(handler);\n      },\n\n      just: function (value) {\n        return Rx.Observable.just(value);\n      },\n\n      empty: function() {\n        return Rx.Observable.empty();\n      }\n\n    };\n\n  });","/*\n Simple wrapper for Underscore / HTML templates\n Matt Perkins\n 4/7/15\n */\nndefine('nori/utils/Templating',\n  function (nrequire, module, exports) {\n\n    var Templating = function () {\n\n      var _templateMap = Object.create(null),\n          _templateHTMLCache = Object.create(null),\n          _templateCache     = Object.create(null),\n          _DOMUtils          = nrequire('nudoru/browser/DOMUtils');\n\n      function addTemplate(id,html) {\n        _templateMap[id] = html;\n      }\n\n      function getSourceFromTemplateMap(id) {\n        var source = _templateMap[id];\n        if(source) {\n          return cleanTemplateHTML(source);\n        }\n        return;\n      }\n\n      function getSourceFromHTML(id) {\n        var src = document.getElementById(id),\n            srchtml;\n\n        if (src) {\n          srchtml = src.innerHTML;\n        } else {\n          console.warn('nudoru/core/Templating, template not found: \"' + id + '\"');\n          srchtml = '<div>Template not found: '+id+'</div>';\n        }\n\n        return cleanTemplateHTML(srchtml);\n      }\n\n      /**\n       * Get the template html from the script tag with id\n       * @param id\n       * @returns {*}\n       */\n      function getSource(id) {\n        if (_templateHTMLCache[id]) {\n          return _templateHTMLCache[id];\n        }\n\n        var sourcehtml = getSourceFromTemplateMap(id);\n\n        if(!sourcehtml) {\n          sourcehtml = getSourceFromHTML(id);\n        }\n\n        _templateHTMLCache[id] = sourcehtml;\n        return sourcehtml;\n      }\n\n      /**\n       * Returns all IDs belonging to text/template type script tags\n       * @returns {Array}\n       */\n      function getAllTemplateIDs() {\n        var scriptTags = Array.prototype.slice.call(document.getElementsByTagName('script'), 0);\n\n        return scriptTags.filter(function (tag) {\n          return tag.getAttribute('type') === 'text/template';\n        }).map(function (tag) {\n          return tag.getAttribute('id');\n        });\n      }\n\n      /**\n       * Returns an underscore template\n       * @param id\n       * @returns {*}\n       */\n      function getTemplate(id) {\n        if (_templateCache[id]) {\n          return _templateCache[id];\n        }\n        var templ          = _.template(getSource(id));\n        _templateCache[id] = templ;\n        return templ;\n      }\n\n      /**\n       * Processes the template and returns HTML\n       * @param id\n       * @param obj\n       * @returns {*}\n       */\n      function asHTML(id, obj) {\n        var temp = getTemplate(id);\n        return temp(obj);\n      }\n\n      /**\n       * Processes the template and returns an HTML Element\n       * @param id\n       * @param obj\n       * @returns {*}\n       */\n      function asElement(id, obj) {\n        return _DOMUtils.HTMLStrToNode(asHTML(id, obj));\n      }\n\n      /**\n       * Cleans template HTML\n       */\n      function cleanTemplateHTML(str) {\n        return str.trim();\n      }\n\n      /**\n       * Remove returns, spaces and tabs\n       * @param str\n       * @returns {XML|string}\n       */\n      function removeWhiteSpace(str) {\n        return str.replace(/(\\r\\n|\\n|\\r|\\t)/gm, '').replace(/>\\s+</g, '><');\n      }\n\n      /**\n       * Iterate over all templates, clean them up and log\n       * Util for SharePoint projects, <script> blocks aren't allowed\n       * So this helps create the blocks for insertion in to the DOM\n       */\n      function processForDOMInsertion() {\n        var ids = getAllTemplateIDs();\n        ids.forEach(function (id) {\n          var src = removeWhiteSpace(getSource(id));\n          console.log(id, src);\n        });\n      }\n\n      /**\n       * Add a template script tag to the DOM\n       * Util for SharePoint projects, <script> blocks aren't allowed\n       * @param id\n       * @param html\n       */\n      //function addClientSideTemplateToDOM(id, html) {\n      //  var s       = document.createElement('script');\n      //  s.type      = 'text/template';\n      //  s.id        = id;\n      //  s.innerHTML = html;\n      //  document.getElementsByTagName('head')[0].appendChild(s);\n      //}\n\n      return {\n        addTemplate           : addTemplate,\n        getSource             : getSource,\n        getAllTemplateIDs     : getAllTemplateIDs,\n        processForDOMInsertion: processForDOMInsertion,\n        getTemplate           : getTemplate,\n        asHTML                : asHTML,\n        asElement             : asElement\n      };\n\n    };\n\n    module.exports = Templating();\n\n  });\n","ndefine('nori/action/ActionConstants',\n  function (nrequire, module, exports) {\n    var objUtils = nrequire('nudoru/core/ObjectUtils');\n\n    _.merge(module.exports, objUtils.keyMirror({\n      CHANGE_STORE_STATE     : null\n    }));\n\n  });","/**\n * Action Creator\n * Based on Flux Actions\n * For more information and guidelines: https://github.com/acdlite/flux-standard-action\n */\n\nndefine('nori/action/ActionCreator',\n  function (nrequire, module, exports) {\n\n    var _noriActionConstants = nrequire('nori/action/ActionConstants');\n\n    var NoriActionCreator = {\n\n      changeStoreState: function (data, id) {\n        var action = {\n          type   : _noriActionConstants.CHANGE_STORE_STATE,\n          payload: {\n            id  : id,\n            data: data\n          }\n        };\n\n        return action;\n      }\n\n    };\n\n    module.exports = NoriActionCreator;\n\n  });","/**\n * Ajax / Rest module.\n * Returns an RxJS Obervable\n *\n * Usage:\n *\n var request = nrequire('nori/service/Rest');\n\n var getSub = request.request({\n        method: 'GET',\n        url   : '/items',\n        json  : true\n      }).subscribe(\n function success(data) {\n          console.log('ok', data);\n        },\n function error(data) {\n          console.log('err', data);\n        });\n\n var postSub = request.request({\n        method: 'POST',\n        url   : '/items',\n        data  : JSON.stringify({key: 'value'}),\n        json  : true\n      }).subscribe(\n function success(data) {\n          console.log('ok', data);\n        },\n function error(data) {\n          console.log('err', data);\n        });\n\n var putSub = request.request({\n        method: 'PUT',\n        url   : '/items/42',\n        data  : JSON.stringify({key: 'value'}),\n        json  : true\n      }).subscribe(\n function success(data) {\n          console.log('ok', data);\n        },\n function error(data) {\n          console.log('err', data);\n        });\n\n var delSub = request.request({\n        method: 'DELETE',\n        url   : '/items/42',\n        json  : true\n      }).subscribe(\n function success(data) {\n          console.log('ok', data);\n        },\n function error(data) {\n          console.log('err', data);\n        });\n *\n */\n\nndefine('nori/service/Rest',\n  function (nrequire, module, exports) {\n\n    /**\n     * Ajax requst using Promises\n     * @param reqObj\n     * @param success\n     * @param error\n     */\n    var Rest = function () {\n\n      function request(reqObj) {\n\n        var xhr    = new XMLHttpRequest(),\n            json   = reqObj.json || false,\n            method = reqObj.method.toUpperCase() || 'GET',\n            url    = reqObj.url,\n            data   = reqObj.data || null;\n\n        return new Rx.Observable.create(function makeReq(observer) {\n          xhr.open(method, url, true);\n\n          xhr.onreadystatechange = function () {\n            if (xhr.readyState === 4) {\n              if (xhr.status >= 200 && xhr.status < 300) {\n                try {\n                  if (json) {\n                    observer.onNext(JSON.parse(xhr.responseText));\n                  } else {\n                    observer.onError(xhr.responseText);\n                  }\n                }\n                catch (e) {\n                  handleError('Result', 'Error parsing result. Status: ' + xhr.status + ', Response: ' + xhr.response);\n                }\n              } else {\n                handleError(xhr.status, xhr.statusText);\n              }\n            }\n          };\n\n          xhr.onerror   = function () {\n            handleError('Network error');\n          };\n          xhr.ontimeout = function () {\n            handleError('Timeout');\n          };\n          xhr.onabort   = function () {\n            handleError('About');\n          };\n\n          // set non json header? 'application/x-www-form-urlencoded; charset=UTF-8'\n          if (json && method !== \"GET\") {\n            xhr.setRequestHeader(\"Content-Type\", \"application/json; charset=utf-8\");\n          } else if (json && method === \"GET\") {\n            //, text/*\n            xhr.setRequestHeader(\"Accept\", \"application/json; odata=verbose\");  // odata param for Sharepoint\n          }\n\n          xhr.send(data);\n\n          function handleError(type, message) {\n            message = message || '';\n            observer.onError(type + ' ' + message);\n          }\n        });\n      }\n\n      return {\n        request: request\n      };\n\n    };\n\n    module.exports = Rest();\n\n  });","ndefine('nori/service/SocketIO',\n  function (nrequire, module, exports) {\n\n    var SocketIOConnector = function () {\n\n      var _subject  = new Rx.BehaviorSubject(),\n          _socketIO = io(),\n          _events   = {\n            PING             : 'ping',\n            PONG             : 'pong',\n            NOTIFY_CLIENT    : 'notify_client',\n            NOTIFY_SERVER    : 'notify_server',\n            CONNECT          : 'connect',\n            DROPPED          : 'dropped',\n            USER_CONNECTED   : 'user_connected',\n            USER_DISCONNECTED: 'user_disconnected',\n            EMIT             : 'emit',\n            BROADCAST        : 'broadcast',\n            SYSTEM_MESSAGE   : 'system_message',\n            MESSAGE          : 'message',\n            CREATE_ROOM      : 'create_room',\n            JOIN_ROOM        : 'join_room',\n            LEAVE_ROOM       : 'leave_room'\n          };\n\n\n      function initialize() {\n        _socketIO.on(_events.NOTIFY_CLIENT, onNotifyClient);\n      }\n\n      /**\n       * All notifications from Socket.io come here\n       * @param payload {type, id, time, payload}\n       */\n      function onNotifyClient(payload) {\n        if (payload.type === _events.PING) {\n          notifyServer(_events.PONG, {});\n        } else if (payload.type === _events.PONG) {\n          console.log('SOCKET.IO PONG!');\n        }\n        notifySubscribers(payload);\n      }\n\n      function ping() {\n        notifyServer(_events.PING, {});\n      }\n\n      /**\n       * All communications to the server should go through here\n       * @param type\n       * @param payload\n       */\n      function notifyServer(type, payload) {\n        _socketIO.emit(_events.NOTIFY_SERVER, {\n          type   : type,\n          payload: payload\n        });\n      }\n\n      //function emit(message, payload) {\n      //  message = message || _events.MESSAGE;\n      //  payload = payload || {};\n      //  _socketIO.emit(message, payload);\n      //}\n      //\n      //function on(event, handler) {\n      //  _socketIO.on(event, handler);\n      //}\n\n      /**\n       * Subscribe handler to updates\n       * @param handler\n       * @returns {*}\n       */\n      function subscribe(handler) {\n        return _subject.subscribe(handler);\n      }\n\n      /**\n       * Called from update or whatever function to dispatch to subscribers\n       * @param payload\n       */\n      function notifySubscribers(payload) {\n        _subject.onNext(payload);\n      }\n\n      /**\n       * Gets the last payload that was dispatched to subscribers\n       * @returns {*}\n       */\n      function getLastNotification() {\n        return _subject.getValue();\n      }\n\n      function getEventConstants() {\n        return _.assign({}, _events);\n      }\n\n      return {\n        events             : getEventConstants,\n        initialize         : initialize,\n        ping               : ping,\n        notifyServer       : notifyServer,\n        subscribe          : subscribe,\n        notifySubscribers  : notifySubscribers,\n        getLastNotification: getLastNotification\n      };\n\n    };\n\n    module.exports = SocketIOConnector();\n\n  });","/**\n * Map data type\n */\n\n\nndefine('nori/store/Map',\n  function (nrequire, module, exports) {\n\n    var Map = function () {\n      var _this,\n          _id,\n          _parentCollection,\n          _dirty   = false,\n          _entries = [],\n          _map     = Object.create(null);\n\n      //----------------------------------------------------------------------------\n      //  Initialization\n      //----------------------------------------------------------------------------\n\n      function initialize(initObj) {\n        if (!initObj.id) {\n          throw new Error('Store must be init\\'d with an id');\n        }\n\n        _this = this;\n        _id   = initObj.id;\n\n        if (initObj.store) {\n          _dirty = true;\n          _map   = initObj.store;\n        } else if (initObj.json) {\n          setJSON(initObj.json);\n        }\n\n      }\n\n      /**\n       * Set map store from a JSON object\n       * @param jstr\n       */\n      function setJSON(jstr) {\n        _dirty = true;\n        try {\n          _map = JSON.parse(jstr);\n        } catch (e) {\n          throw new Error('MapCollection, error parsing JSON:', jstr, e);\n        }\n      }\n\n      function getID() {\n        return _id;\n      }\n\n      /**\n       * Erase it\n       */\n      function clear() {\n        _map   = {};\n        _dirty = true;\n      }\n\n      function isDirty() {\n        return _dirty;\n      }\n\n      function markClean() {\n        _dirty = false;\n      }\n\n      /**\n       * Set property or merge in new data\n       * @param key String = name of property to set, Object = will merge new props\n       * @param value String = value of property to set\n       */\n      function set(key, value) {\n\n        if (typeof key === 'object') {\n          _map = _.merge({}, _map, key);\n        } else {\n          _map[key] = value;\n        }\n\n        // Mark changed\n        _dirty = true;\n\n        dispatchChange('set_key');\n      }\n\n      /**\n       * Assuming that _map[key] is an object, this will set a property on it\n       * @param key\n       * @param prop\n       * @param data\n       */\n      function setKeyProp(key, prop, data) {\n        _map[key][prop] = data;\n\n        _dirty = true;\n        dispatchChange('set_key');\n      }\n\n      /**\n       * Returns a copy of the data\n       * @returns *\n       */\n      function get(key) {\n        var value = has(key) ? _map[key] : undefined;\n\n        if (value) {\n          value = _.cloneDeep(value);\n        }\n\n        return value;\n      }\n\n      /**\n       * Assuming that _map[key] is an object, this will get value\n       * @param key\n       * @param prop\n       * @returns {*}\n       */\n      function getKeyProp(key, prop) {\n        var valueObj = has(key) ? _map[key] : undefined,\n            value    = null;\n\n        if (valueObj) {\n          value = _.cloneDeep(valueObj[prop]);\n        }\n\n        return value;\n      }\n\n      /**\n       * Returns true of the key is present in the map\n       * @param key\n       * @returns {boolean}\n       */\n      function has(key) {\n        return _map.hasOwnProperty(key);\n      }\n\n      /**\n       * Returns an array of the key/values. Results are cached and only regenerated\n       * if changed (set)\n       * @returns {Array}\n       */\n      function entries() {\n        if (!_dirty && _entries) {\n          return _entries;\n        }\n\n        var arry = [];\n        for (var key in _map) {\n          arry.push({key: key, value: _map[key]});\n        }\n\n        _entries = arry;\n        _dirty   = false;\n\n        return arry;\n      }\n\n      /**\n       * Number of entries\n       * @returns {Number}\n       */\n      function size() {\n        return keys().length;\n      }\n\n      /**\n       * Returns an array of all keys in the map\n       * @returns {Array}\n       */\n      function keys() {\n        return Object.keys(_map);\n      }\n\n      /**\n       * Returns an array of all vaules in the map\n       * @returns {Array}\n       */\n      function values() {\n        return entries().map(function (entry) {\n          return entry.value;\n        });\n      }\n\n      /**\n       * Remove a value\n       * @param key\n       */\n      function remove(key) {\n        delete _map[key];\n      }\n\n      /**\n       * Returns matches to the predicate function\n       * @param predicate\n       * @returns {Array.<T>}\n       */\n      function filterValues(predicate) {\n        return values().filter(predicate);\n      }\n\n      function first() {\n        return entries()[0];\n      }\n\n      function last() {\n        var e = entries();\n        return e[e.length - 1];\n      }\n\n      function getAtIndex(i) {\n        return entries()[i];\n      }\n\n      /**\n       * Returns a copy of the data map\n       * @returns {void|*}\n       */\n      function toObject() {\n        return _.merge({}, _map);\n      }\n\n      /**\n       * Return a new object by \"translating\" the properties of the map from one key to another\n       * @param tObj {currentProp, newProp}\n       */\n      function transform(tObj) {\n        var transformed = Object.create(null);\n\n        for (var prop in tObj) {\n          if (_map.hasOwnProperty(prop)) {\n            transformed[tObj[prop]] = _map[prop];\n          }\n        }\n\n        return transformed;\n      }\n\n      /**\n       * On change, emit event globally\n       */\n      function dispatchChange(type) {\n        var payload = {\n          id     : _id,\n          mapType: 'store'\n        };\n\n        _this.notifySubscribers(payload);\n\n        if (_parentCollection.dispatchChange) {\n          _parentCollection.dispatchChange({\n            id: _id\n          }, (type || 'map'));\n        }\n\n      }\n\n      function toJSON() {\n        return JSON.stringify(_map);\n      }\n\n      function setParentCollection(collection) {\n        _parentCollection = collection;\n      }\n\n      function getParentCollection() {\n        return _parentCollection;\n      }\n\n      //----------------------------------------------------------------------------\n      //  API\n      //----------------------------------------------------------------------------\n\n      return {\n        initialize         : initialize,\n        getID              : getID,\n        clear              : clear,\n        isDirty            : isDirty,\n        markClean          : markClean,\n        setJSON            : setJSON,\n        set                : set,\n        setKeyProp         : setKeyProp,\n        get                : get,\n        getKeyProp         : getKeyProp,\n        has                : has,\n        remove             : remove,\n        keys               : keys,\n        values             : values,\n        entries            : entries,\n        filterValues       : filterValues,\n        size               : size,\n        first              : first,\n        last               : last,\n        getAtIndex         : getAtIndex,\n        toObject           : toObject,\n        transform          : transform,\n        toJSON             : toJSON,\n        setParentCollection: setParentCollection,\n        getParentCollection: getParentCollection\n      };\n\n    };\n\n    module.exports = Map;\n\n  });","/**\n * Map Collection - an array of maps\n */\n\nndefine('nori/store/MapCollection',\n  function (nrequire, module, exports) {\n\n    var MapCollection = function () {\n      var _this,\n          _id,\n          _parentCollection,\n          _caret    = 0,\n          _children = [];\n\n      //----------------------------------------------------------------------------\n      //  Initialization\n      //----------------------------------------------------------------------------\n\n      function initialize(initObj) {\n        if (!initObj.id) {\n          throw new Error('StoreCollection must be init\\'d with an id');\n        }\n\n        _this = this;\n        _id   = initObj.id;\n\n        // TODO test\n        if (initObj.stores) {\n          addMapsFromArray.call(_this, initObj.stores);\n        }\n      }\n\n      //----------------------------------------------------------------------------\n      //  Iterator\n      //----------------------------------------------------------------------------\n\n      function next() {\n        var ret = {};\n        if (hasNext()) {\n          ret = {value: _children[_caret++], done: !hasNext()};\n        } else {\n          ret = current();\n        }\n\n        return ret;\n      }\n\n      function current() {\n        return {value: _children[_caret], done: !hasNext()};\n      }\n\n      function rewind() {\n        _caret = 0;\n        return _children[_caret];\n      }\n\n      function hasNext() {\n        return _caret < _children.length;\n      }\n\n      //----------------------------------------------------------------------------\n      //  Impl\n      //----------------------------------------------------------------------------\n\n      function isDirty() {\n        var dirty = false;\n        forEach(function checkDirty(map) {\n          if (map.isDirty()) {\n            dirty = true;\n          }\n        });\n        return dirty;\n      }\n\n      function markClean() {\n        forEach(function checkDirty(map) {\n          map.markClean();\n        });\n      }\n\n      /**\n       * Add an array of Store instances\n       * @param sArry\n       */\n      function addMapsFromArray(sArry) {\n        sArry.forEach(function (store) {\n          add(store);\n        });\n      }\n\n      /**\n       * Create an add child Store stores from an array of objects\n       * @param array Array of objects\n       * @param idKey Key on each object to use for the ID of that Store store\n       */\n      function addFromObjArray(oArry, idKey) {\n        oArry.forEach(function (obj) {\n\n          var id;\n\n          if (obj.hasOwnProperty(idKey)) {\n            id = obj[idKey];\n          } else {\n            id = _id + 'child' + _children.length;\n          }\n\n          add(Nori.store().createMap({id: id, store: obj}));\n        });\n        dispatchChange(_id, 'add_map');\n      }\n\n      function addFromJSONArray(json, idKey) {\n        json.forEach(function (jstr) {\n\n          var id, obj;\n\n          try {\n            obj = JSON.parse(jstr);\n          } catch (e) {\n            throw new Error('MapCollection, error parsing JSON:', jstr, e);\n          }\n\n          if (obj.hasOwnProperty(idKey)) {\n            id = obj[idKey];\n          } else {\n            id = _id + 'child' + _children.length;\n          }\n\n          add(Nori.store().createMap({id: id, store: obj}));\n        });\n        dispatchChange(_id, 'add_map');\n      }\n\n      function getID() {\n        return _id;\n      }\n\n      function add(store) {\n        var currIdx = getMapIndex(store.getID());\n\n        store.setParentCollection(_this);\n\n        if (currIdx >= 0) {\n          _children[currIdx] = store;\n        } else {\n          _children.push(store);\n        }\n\n        dispatchChange(_id, 'add_map');\n      }\n\n      /**\n       * Remove a store from the collection\n       * @param storeID\n       */\n      function remove(storeID) {\n        var currIdx = getMapIndex(storeID);\n        if (currIdx >= 0) {\n          _children[currIdx].setParentCollection(null);\n          _children[currIdx] = null;\n          _children.splice(currIdx, 1);\n          dispatchChange(_id, 'remove_map');\n        } else {\n          console.log(_id + ' remove, store not in collection: ' + storeID);\n        }\n      }\n\n      /**\n       * Remove all stores from the array\n       */\n      function removeAll() {\n        _children.forEach(function (map) {\n          map.setParentCollection(null);\n        });\n\n        _children = [];\n        dispatchChange(_id, 'remove_map');\n      }\n\n      /**\n       * Gets the Store by ID\n       * @param storeID\n       * @returns {T}\n       */\n      function getMap(storeID) {\n        return _children.filter(function (store) {\n          return store.getID() === storeID;\n        })[0];\n      }\n\n      /**\n       * Get the index in _children array by Store's ID\n       * @param storeID\n       * @returns {number}\n       */\n      function getMapIndex(storeID) {\n        return _children.map(function (store) {\n          return store.getID();\n        }).indexOf(storeID);\n      }\n\n      /**\n       * On change, emit event globally\n       */\n      function dispatchChange(data, type) {\n        var payload = {\n          id     : _id,\n          type   : type || '',\n          mapType: 'collection',\n          mapID  : data.id\n        };\n\n        _this.notifySubscribers(payload);\n\n        if (_parentCollection) {\n          _parentCollection.dispatchChange({id: _id, store: getMap()});\n        }\n      }\n\n      function hasMap(storeID) {\n        return _children[storeID];\n      }\n\n      /**\n       * Number of entries\n       * @returns {Number}\n       */\n      function size() {\n        return _children.length;\n      }\n\n      function first() {\n        return _children[0];\n      }\n\n      function last() {\n        return _children[_children.length - 1];\n      }\n\n      function atIndex(i) {\n        return _children[i];\n      }\n\n      /**\n       * Runs a predidate on each child map\n       * @param predicate\n       * @returns {Array.<T>}\n       */\n      function filter(predicate) {\n        return _children.filter(predicate);\n      }\n\n      /**\n       * Returns maps where the filter matches the prop / value pair\n       * @param key\n       * @param value\n       * @returns {Array.<T>}\n       */\n      function filterByKey(key, value) {\n        return _children.filter(function (map) {\n          return map.get(key) === value;\n        });\n      }\n\n      function forEach(func) {\n        return _children.forEach(func);\n      }\n\n      function map(func) {\n        return _children.map(func);\n      }\n\n      /**\n       * Return an array of entries of each map\n       * @returns {Array}\n       */\n      function entries() {\n        var arry = [];\n        _children.forEach(function (map) {\n          arry.push(map.entries());\n        });\n        return arry;\n      }\n\n      function toJSON() {\n        return JSON.stringify(_children);\n      }\n\n      function setParentCollection(collection) {\n        _parentCollection = collection;\n      }\n\n      function getParentCollection() {\n        return _parentCollection;\n      }\n\n      //----------------------------------------------------------------------------\n      //  API\n      //----------------------------------------------------------------------------\n\n      return {\n        initialize         : initialize,\n        current            : current,\n        next               : next,\n        hasNext            : hasNext,\n        rewind             : rewind,\n        getID              : getID,\n        isDirty            : isDirty,\n        markClean          : markClean,\n        add                : add,\n        addMapsFromArray   : addMapsFromArray,\n        addFromObjArray    : addFromObjArray,\n        addFromJSONArray   : addFromJSONArray,\n        remove             : remove,\n        removeAll          : removeAll,\n        getMap             : getMap,\n        hasMap             : hasMap,\n        size               : size,\n        first              : first,\n        last               : last,\n        atIndex            : atIndex,\n        filter             : filter,\n        filterByKey        : filterByKey,\n        forEach            : forEach,\n        map                : map,\n        entries            : entries,\n        toJSON             : toJSON,\n        dispatchChange     : dispatchChange,\n        setParentCollection: setParentCollection,\n        getParentCollection: getParentCollection\n      };\n    };\n\n    module.exports = MapCollection;\n\n\n  });","ndefine('nori/store/MixinMapFactory',\n  function (nrequire, module, exports) {\n\n    var MixinMapFactory = function () {\n\n      var _mapCollectionList = Object.create(null),\n          _mapList           = Object.create(null),\n          _mapCollectionFactory = nrequire('nori/store/MapCollection'),\n          _mapFactory = nrequire('nori/store/Map'),\n          _observableFactory = nrequire('nori/utils/MixinObservableSubject');\n\n      /**\n       * Create a new store collection and initalize\n       * @param initObj\n       * @param extras\n       * @returns {*}\n       */\n      function createMapCollection(initObj, extras) {\n        var m = Nori.assignArray({}, [_mapCollectionFactory(), _observableFactory(), extras]);\n        m.initialize(initObj);\n        return m;\n      }\n\n      /**\n       * Create a new store and initialize\n       * @param initObj\n       * @param extras\n       * @returns {*}\n       */\n      function createMap(initObj, extras) {\n        var m = Nori.assignArray({}, [_mapFactory(), _observableFactory(), extras]);\n        m.initialize(initObj);\n        return m;\n      }\n\n      /**\n       * Get a store from the application collection\n       * @param storeID\n       * @returns {void|*}\n       */\n      function getMap(storeID) {\n        return _mapList[storeID];\n      }\n\n      /**\n       * Get a store collection from the application collection\n       * @param storeID\n       * @returns {void|*}\n       */\n      function getMapCollection(storeID) {\n        return _mapCollectionList[storeID];\n      }\n\n      return {\n        createMapCollection: createMapCollection,\n        createMap          : createMap,\n        getMap             : getMap,\n        getMapCollection   : getMapCollection\n      };\n\n    };\n\n\n    module.exports = MixinMapFactory();\n\n  });","/**\n * Mixin for Nori stores to add functionality similar to Redux' Reducer and single\n * object state tree concept. Mixin should be composed to nori/store/ApplicationStore\n * during creation of main AppStore\n *\n * https://gaearon.github.io/redux/docs/api/Store.html\n * https://gaearon.github.io/redux/docs/basics/Reducers.html\n *\n * Created 8/13/15\n */\n\nndefine('nori/store/MixinReducerStore',\n  function (nrequire, module, exports) {\n\n    var MixinReducerStore = function () {\n      var _this,\n          _state,\n          _stateReducers       = [],\n          _noriActionConstants = nrequire('nori/action/ActionConstants');\n\n      //----------------------------------------------------------------------------\n      //  Accessors\n      //----------------------------------------------------------------------------\n\n      /**\n       * _state might not exist if subscribers are added before this store is initialized\n       */\n      function getState() {\n        if (_state) {\n          return _state.getState();\n        }\n        return {};\n      }\n\n      function setState(state) {\n        if (!_.isEqual(state, _state)) {\n          _state.setState(state);\n          _this.notifySubscribers({});\n        }\n      }\n\n      function setReducers(reducerArray) {\n        _stateReducers = reducerArray;\n      }\n\n      function addReducer(reducer) {\n        _stateReducers.push(reducer);\n      }\n\n      //----------------------------------------------------------------------------\n      //  Init\n      //----------------------------------------------------------------------------\n\n      /**\n       * Set up event listener/receiver\n       */\n      function initializeReducerStore() {\n        if (!this.createSubject) {\n          console.warn('nori/store/MixinReducerStore needs nori/utils/MixinObservableSubject to notify');\n        }\n\n        var simpleStoreFactory = nrequire('nori/store/SimpleStore');\n\n        _this  = this;\n        _state = simpleStoreFactory();\n\n        if (!_stateReducers) {\n          throw new Error('ReducerStore, must set a reducer before initialization');\n        }\n\n        // Set initial state from empty event\n        applyReducers({});\n      }\n\n      /**\n       * Apply the action object to the reducers to change state\n       * are sent to all reducers to update the state\n       * @param actionObject\n       */\n      function apply(actionObject) {\n        console.log('ReducerStore Apply: ', actionObject.type, actionObject.payload);\n        applyReducers(actionObject);\n      }\n\n      function applyReducers(actionObject) {\n        var nextState = applyReducersToState(getState(), actionObject);\n        setState(nextState);\n        _this.handleStateMutation();\n      }\n\n      /**\n       * API hook to handle state updates\n       */\n      function handleStateMutation() {\n        // override this\n      }\n\n      /**\n       * Creates a new state from the combined reduces and action object\n       * Store state isn't modified, current state is passed in and mutated state returned\n       * @param state\n       * @param action\n       * @returns {*|{}}\n       */\n      function applyReducersToState(state, action) {\n        state = state || {};\n        // TODO should this actually use array.reduce()?\n        _stateReducers.forEach(function applyStateReducerFunction(reducerFunc) {\n          state = reducerFunc(state, action);\n        });\n        return state;\n      }\n\n      /**\n       * Template reducer function\n       * Store state isn't modified, current state is passed in and mutated state returned\n\n       function templateReducerFunction(state, event) {\n        state = state || {};\n        switch (event.type) {\n          case _noriActionConstants.MODEL_DATA_CHANGED:\n            // can compose other reducers\n            // return _.assign({}, state, otherStateTransformer(state));\n            return _.assign({}, state, {prop: event.payload.value});\n          default:\n            return state;\n        }\n      }\n       */\n\n      //----------------------------------------------------------------------------\n      //  API\n      //----------------------------------------------------------------------------\n\n      return {\n        initializeReducerStore: initializeReducerStore,\n        getState              : getState,\n        setState              : setState,\n        apply                 : apply,\n        setReducers           : setReducers,\n        addReducer            : addReducer,\n        applyReducers         : applyReducers,\n        applyReducersToState  : applyReducersToState,\n        handleStateMutation   : handleStateMutation\n      };\n\n    };\n\n    module.exports = MixinReducerStore();\n\n  });","ndefine('nori/store/SimpleStore',\n  function (nrequire, module, exports) {\n\n    var SimpleStore = function () {\n      var _internalState   = Object.create(null);\n\n      /**\n       * Return a copy of the state\n       * @returns {void|*}\n       */\n      function getState() {\n        return _.assign({}, _internalState);\n      }\n\n      /**\n       * Sets the state\n       * @param nextState\n       */\n      function setState(nextState) {\n        _internalState = _.assign(_internalState, nextState);\n      }\n\n      return {\n        getState : getState,\n        setState : setState\n      };\n\n    };\n\n    module.exports = SimpleStore;\n\n  });","ndefine('nori/view/ApplicationView',\n  function (nrequire, module, exports) {\n\n    var ApplicationView = function () {\n\n      var _this,\n          _domUtils = nrequire('nudoru/browser/DOMUtils');\n\n      //----------------------------------------------------------------------------\n      //  Initialization\n      //----------------------------------------------------------------------------\n\n      /**\n       * Initialize\n       * @param scaffoldTemplates template IDs to attached to the body for the app\n       */\n      function initializeApplicationView(scaffoldTemplates) {\n        _this = this;\n\n        attachApplicationScaffolding(scaffoldTemplates);\n      }\n\n      /**\n       * Attach app HTML structure\n       * @param templates\n       */\n      function attachApplicationScaffolding(templates) {\n        if (!templates) {\n          return;\n        }\n\n        var bodyEl = document.querySelector('body');\n\n        templates.forEach(function (templ) {\n          bodyEl.appendChild(_domUtils.HTMLStrToNode(_this.template().getSource('template__' + templ, {})));\n        });\n      }\n\n      /**\n       * After app initialization, remove the loading message\n       */\n      function removeLoadingMessage() {\n        var cover   = document.querySelector('#initialization__cover'),\n            message = document.querySelector('.initialization__message');\n\n        TweenLite.to(cover, 1, {\n          alpha: 0, ease: Quad.easeOut, onComplete: function () {\n            cover.parentNode.removeChild(cover);\n          }\n        });\n\n        TweenLite.to(message, 2, {\n          top: \"+=50px\", ease: Quad.easeIn, onComplete: function () {\n            cover.removeChild(message);\n          }\n        });\n      }\n\n      //----------------------------------------------------------------------------\n      //  API\n      //----------------------------------------------------------------------------\n\n      return {\n        initializeApplicationView: initializeApplicationView,\n        removeLoadingMessage     : removeLoadingMessage\n      };\n\n    };\n\n    module.exports = ApplicationView();\n\n  });","ndefine('nori/view/MixinBrowserEvents',\n  function (nrequire, module, exports) {\n\n    var MixinBrowserEvents = function () {\n\n      var _scrollableAppContainer,\n          _browserScrollStream,\n          _browserResizeStream;\n\n      //----------------------------------------------------------------------------\n      //  Initialization\n      //----------------------------------------------------------------------------\n\n      function initializeBrowserEvents(scrollcontainer) {\n        if(!this.createSubject) {\n          console.warn('nori/view/MixinBrowserEvents needs nori/utils/MixinObservableSubject to notify');\n        }\n\n        if(scrollcontainer) {\n          setMainScrollingView(scrollcontainer);\n        } else {\n          _scrollableAppContainer = document;\n        }\n\n        createBrowserEventStreams.bind(this)();\n\n        this.createSubject('browserScroll');\n        this.createSubject('browserResize');\n      }\n\n      /**\n       * Set up RxJS streams for events\n       */\n      function createBrowserEventStreams() {\n        _browserResizeStream = Rx.Observable.fromEvent(window, 'resize')\n          .throttle(100)\n          .subscribe(handleViewPortResize.bind(this));\n\n        _browserScrollStream = Rx.Observable.fromEvent(_scrollableAppContainer, 'scroll')\n          .throttle(100)\n          .subscribe(handleViewPortScroll.bind(this));\n      }\n\n      function handleViewPortResize() {\n        this.notifySubscribersOf('browserResize', getCurrentViewPortSize());\n      }\n\n      function handleViewPortScroll() {\n        this.notifySubscribersOf('browserScroll', getCurrentViewPortScroll());\n      }\n\n      function getCurrentViewPortSize() {\n        return {\n          width : window.innerWidth,\n          height: window.innerHeight\n        };\n      }\n\n      function getCurrentViewPortScroll() {\n        var scrollEL = _scrollableAppContainer ? _scrollableAppContainer : document.body;\n\n        var left = scrollEL.scrollLeft,\n            top  = scrollEL.scrollTop;\n\n        left = left ? left : 0;\n        top  = top ? top : 0;\n\n        return {left: left, top: top};\n      }\n\n      function getMainScrollingView() {\n        return _scrollableAppContainer;\n      }\n\n      function setMainScrollingView(elID) {\n        _scrollableAppContainer = document.querySelector(elID);\n      }\n\n      //----------------------------------------------------------------------------\n      //  API\n      //----------------------------------------------------------------------------\n\n      return {\n        initializeBrowserEvents : initializeBrowserEvents,\n        getMainScrollingView    : getMainScrollingView,\n        setMainScrollingView    : setMainScrollingView,\n        getCurrentViewPortSize  : getCurrentViewPortSize,\n        getCurrentViewPortScroll: getCurrentViewPortScroll\n      };\n\n    };\n\n    module.exports = MixinBrowserEvents();\n\n\n  });","/**\n * Mixin view that allows for component views\n */\n\nndefine('nori/view/MixinComponentViews',\n  function (nrequire, module, exports) {\n\n    var MixinComponentViews = function () {\n\n      var _componentViewMap            = Object.create(null),\n          _componentHTMLTemplatePrefix = 'template__',\n          _template                    = nrequire('nori/utils/Templating');\n\n      /**\n       * Return the template object\n       * @returns {*}\n       */\n      function getTemplate() {\n        return _template;\n      }\n\n      /**\n       * Map a component to a mounting point. If a string is passed,\n       * the correct object will be created from the factory method, otherwise,\n       * the passed component object is used.\n       *\n       * @param componentID\n       * @param componentIDorObj\n       * @param mountPoint\n       */\n      function mapViewComponent(componentID, componentIDorObj, mountPoint) {\n        var componentObj;\n\n        if (typeof componentIDorObj === 'string') {\n          var componentFactory = require(componentIDorObj);\n          componentObj         = createComponentView(componentFactory())();\n        } else {\n          componentObj = componentIDorObj;\n        }\n\n        _componentViewMap[componentID] = {\n          htmlTemplate: _template.getTemplate(_componentHTMLTemplatePrefix + componentID),\n          controller  : componentObj,\n          mountPoint  : mountPoint\n        };\n      }\n\n      /**\n       * Factory to create component view modules by concating multiple source objects\n       * @param componentSource Custom module source\n       * @returns {*}\n       */\n      function createComponentView(componentSource) {\n        return function () {\n          var componentViewFactory  = nrequire('nori/view/ViewComponent'),\n              eventDelegatorFactory = nrequire('nori/view/MixinEventDelegator'),\n              observableFactory     = nrequire('nori/utils/MixinObservableSubject'),\n              simpleStoreFactory    = nrequire('nori/store/SimpleStore'),\n              componentAssembly, finalComponent, previousInitialize;\n\n          componentAssembly = [\n            componentViewFactory(),\n            eventDelegatorFactory(),\n            observableFactory(),\n            simpleStoreFactory(),\n            componentSource\n          ];\n\n          if (componentSource.mixins) {\n            componentAssembly = componentAssembly.concat(componentSource.mixins);\n          }\n\n          finalComponent = Nori.assignArray({}, componentAssembly);\n\n          // Compose a new initialize function by inserting call to component super module\n          previousInitialize        = finalComponent.initialize;\n          finalComponent.initialize = function initialize(initObj) {\n            finalComponent.initializeComponent(initObj);\n            previousInitialize.call(finalComponent, initObj);\n          };\n\n          return _.assign({}, finalComponent);\n        };\n      }\n\n      /**\n       * Show a mapped componentView\n       * @param componentID\n       * @param dataObj\n       */\n      function showViewComponent(componentID, mountPoint) {\n        var componentView = _componentViewMap[componentID];\n        if (!componentView) {\n          console.warn('No componentView mapped for id: ' + componentID);\n          return;\n        }\n\n        if (!componentView.controller.isInitialized()) {\n          mountPoint = mountPoint || componentView.mountPoint;\n          componentView.controller.initialize({\n            id        : componentID,\n            template  : componentView.htmlTemplate,\n            mountPoint: mountPoint\n          });\n        } else {\n          componentView.controller.update();\n        }\n\n        componentView.controller.componentRender();\n        componentView.controller.mount();\n      }\n\n      /**\n       * Returns a copy of the map object for component views\n       * @returns {null}\n       */\n      function getComponentViewMap() {\n        return _.assign({}, _componentViewMap);\n      }\n\n      //----------------------------------------------------------------------------\n      //  API\n      //----------------------------------------------------------------------------\n\n      return {\n        template           : getTemplate,\n        mapViewComponent   : mapViewComponent,\n        createComponentView: createComponentView,\n        showViewComponent  : showViewComponent,\n        getComponentViewMap: getComponentViewMap\n      };\n\n    };\n\n    module.exports = MixinComponentViews();\n\n  });","/**\n * Convenience mixin that makes events easier for views\n *\n * Based on Backbone\n * Review this http://blog.marionettejs.com/2015/02/12/understanding-the-event-hash/index.html\n *\n * Example:\n * this.setEvents({\n *        'click #btn_main_projects': handleProjectsButton,\n *        'click #btn_foo, click #btn_bar': handleFooBarButtons\n *      });\n * this.delegateEvents();\n *\n */\n\nndefine('nori/view/MixinEventDelegator',\n  function (nrequire, module, exports) {\n\n    var MixinEventDelegator = function () {\n\n      var _eventsMap,\n          _eventSubscribers,\n          _rx = nrequire('nori/utils/Rx');\n\n      function setEvents(evtObj) {\n        _eventsMap = evtObj;\n      }\n\n      function getEvents() {\n        return _eventsMap;\n      }\n\n      /**\n       * Automates setting events on DOM elements.\n       * 'evtStr selector':callback\n       * 'evtStr selector, evtStr selector': sharedCallback\n       */\n      function delegateEvents() {\n        if (!_eventsMap) {\n          return;\n        }\n\n        _eventSubscribers = Object.create(null);\n\n        for (var evtStrings in _eventsMap) {\n          if (_eventsMap.hasOwnProperty(evtStrings)) {\n\n            var mappings    = evtStrings.split(','),\n                eventHandler = _eventsMap[evtStrings];\n\n            if (!is.function(eventHandler)) {\n              console.warn('EventDelegator, handler for ' + evtStrings + ' is not a function');\n              return;\n            }\n\n            /* jshint -W083 */\n            // https://jslinterrors.com/dont-make-functions-within-a-loop\n            mappings.forEach(function (evtMap) {\n              evtMap = evtMap.trim();\n              var eventStr = evtMap.split(' ')[0].trim(),\n                  selector = evtMap.split(' ')[1].trim();\n              _eventSubscribers[evtStrings] = createHandler(selector, eventStr, eventHandler);\n            });\n            /* jshint +W083 */\n          }\n        }\n      }\n\n      function createHandler(selector, eventStr, eventHandler) {\n        return _rx.dom(selector, eventStr).subscribe(eventHandler);\n      }\n\n      /**\n       * Cleanly remove events\n       */\n      function undelegateEvents() {\n        if (!_eventsMap) {\n          return;\n        }\n\n        for (var event in _eventSubscribers) {\n          _eventSubscribers[event].dispose();\n          delete _eventSubscribers[event];\n        }\n\n        _eventSubscribers = Object.create(null);\n      }\n\n      return {\n        setEvents       : setEvents,\n        getEvents       : getEvents,\n        undelegateEvents: undelegateEvents,\n        delegateEvents  : delegateEvents\n      };\n\n    };\n\n    module.exports = MixinEventDelegator;\n\n  });","/**\n * Mixin view that allows for component views to be display on store state changes\n */\n\nndefine('nori/view/MixinStoreStateViews',\n  function (nrequire, module, exports) {\n\n    var MixinStoreStateViews = function () {\n\n      var _this,\n          _watchedStore,\n          _currentViewID,\n          _currentStoreState,\n          _stateViewMountPoint,\n          _stateViewIDMap = Object.create(null);\n\n      /**\n       * Set up listeners\n       */\n      function initializeStateViews(store) {\n        _this = this; // mitigation, Due to events, scope may be set to the window object\n        _watchedStore = store;\n\n        this.createSubject('viewChange');\n\n        _watchedStore.subscribe(function onStateChange() {\n          handleStateChange();\n        });\n      }\n\n      /**\n       * Show route from URL hash on change\n       * @param routeObj\n       */\n      function handleStateChange() {\n        showViewForCurrentStoreState();\n      }\n\n      function showViewForCurrentStoreState() {\n        var state = _watchedStore.getState().currentState;\n        if (state) {\n          if (state !== _currentStoreState) {\n            _currentStoreState = state;\n            showStateViewComponent.bind(_this)(_currentStoreState);\n          }\n        }\n      }\n\n      /**\n       * Set the location for the view to mount on route changes, any contents will\n       * be removed prior\n       * @param elID\n       */\n      function setViewMountPoint(elID) {\n        _stateViewMountPoint = elID;\n      }\n\n      function getViewMountPoint() {\n        return _stateViewMountPoint;\n      }\n\n      /**\n       * Map a route to a module view controller\n       * @param templateID\n       * @param componentIDorObj\n       */\n      function mapStateToViewComponent(state, templateID, componentIDorObj) {\n        _stateViewIDMap[state] = templateID;\n        this.mapViewComponent(templateID, componentIDorObj, _stateViewMountPoint);\n      }\n\n      /**\n       * Show a view (in response to a route change)\n       * @param state\n       */\n      function showStateViewComponent(state) {\n        var componentID = _stateViewIDMap[state];\n        if (!componentID) {\n          console.warn(\"No view mapped for route: \" + state);\n          return;\n        }\n\n        removeCurrentView();\n\n        _currentViewID = componentID;\n        this.showViewComponent(_currentViewID);\n\n        // Transition new view in\n        TweenLite.set(_stateViewMountPoint, {alpha: 0});\n        TweenLite.to(_stateViewMountPoint, 0.25, {alpha: 1, ease: Quad.easeIn});\n\n        this.notifySubscribersOf('viewChange', componentID);\n      }\n\n      /**\n       * Remove the currently displayed view\n       */\n      function removeCurrentView() {\n        if (_currentViewID) {\n          _this.getComponentViewMap()[_currentViewID].controller.unmount();\n        }\n        _currentViewID = '';\n      }\n\n      return {\n        initializeStateViews        : initializeStateViews,\n        showViewForCurrentStoreState: showViewForCurrentStoreState,\n        showStateViewComponent      : showStateViewComponent,\n        setViewMountPoint           : setViewMountPoint,\n        getViewMountPoint           : getViewMountPoint,\n        mapStateToViewComponent     : mapStateToViewComponent\n      };\n\n    };\n\n    module.exports = MixinStoreStateViews();\n\n  });","ndefine('nori/view/MixinNudoruControls',\n  function (nrequire, module, exports) {\n\n    var MixinNudoruControls = function () {\n\n      var _notificationView  = nrequire('nudoru/component/ToastView'),\n          _toolTipView       = nrequire('nudoru/component/ToolTipView'),\n          _messageBoxView    = nrequire('nudoru/component/MessageBoxView'),\n          _messageBoxCreator = nrequire('nudoru/component/MessageBoxCreator'),\n          _modalCoverView    = nrequire('nudoru/component/ModalCoverView');\n\n      function initializeNudoruControls() {\n        _toolTipView.initialize('tooltip__container');\n        _notificationView.initialize('toast__container');\n        _messageBoxView.initialize('messagebox__container');\n        _modalCoverView.initialize();\n      }\n\n      function mbCreator() {\n        return _messageBoxCreator;\n      }\n\n      function addMessageBox(obj) {\n        return _messageBoxView.add(obj);\n      }\n\n      function removeMessageBox(id) {\n        _messageBoxView.remove(id);\n      }\n\n      function alert(message, title) {\n        return mbCreator().alert(title || 'Alert', message);\n      }\n\n      function addNotification(obj) {\n        return _notificationView.add(obj);\n      }\n\n      function notify(message, title, type) {\n        return addNotification({\n          title  : title || '',\n          type   : type || _notificationView.type().DEFAULT,\n          message: message\n        });\n      }\n\n      return {\n        initializeNudoruControls: initializeNudoruControls,\n        mbCreator               : mbCreator,\n        addMessageBox           : addMessageBox,\n        removeMessageBox        : removeMessageBox,\n        addNotification         : addNotification,\n        alert                   : alert,\n        notify                  : notify\n      };\n\n    };\n\n    module.exports = MixinNudoruControls();\n\n  });","/**\n * Mixin view that allows for component views to be display on routing changes\n */\n\nndefine('nori/view/MixinRouteViews',\n  function (nrequire, module, exports) {\n\n    var MixinRouteViews = function () {\n\n      var _this,\n          _currentRouteViewID,\n          _routeViewMountPoint,\n          _routeViewIDMap = Object.create(null);\n\n      /**\n       * Set up listeners\n       */\n      function initializeRouteViews() {\n        _this = this; // mitigation, Due to events, scope may be set to the window object\n\n        this.createSubject('viewChange');\n\n        Nori.router().subscribe(function onRouteChange(payload) {\n          handleRouteChange(payload.routeObj);\n        });\n      }\n\n      /**\n       * Show route from URL hash on change\n       * @param routeObj\n       */\n      function handleRouteChange(routeObj) {\n        showRouteViewComponent.bind(_this)(routeObj.route);\n      }\n\n      /**\n       * Typically on app startup, show the view assigned to the current URL hash\n       *\n       * @param silent If true, will not notify subscribers of the change, prevents\n       * double showing on initial load\n       */\n      function showViewFromURLHash(silent) {\n        this.showRouteViewComponent(Nori.getCurrentRoute().route);\n        if (!silent) {\n          Nori.router().notifySubscribers();\n        }\n      }\n\n      /**\n       * Set the location for the view to mount on route changes, any contents will\n       * be removed prior\n       * @param elID\n       */\n      function setViewMountPoint(elID) {\n        _routeViewMountPoint = elID;\n      }\n\n      function getViewMountPoint() {\n        return _routeViewMountPoint;\n      }\n\n      /**\n       * Map a route to a module view controller\n       * @param templateID\n       * @param componentIDorObj\n       */\n      function mapRouteToViewComponent(route, templateID, componentIDorObj) {\n        _routeViewIDMap[route] = templateID;\n        this.mapViewComponent(templateID, componentIDorObj, _routeViewMountPoint);\n      }\n\n      /**\n       * Show a view (in response to a route change)\n       * @param route\n       */\n      function showRouteViewComponent(route) {\n        var componentID = _routeViewIDMap[route];\n        if (!componentID) {\n          console.warn(\"No view mapped for route: \" + route);\n          return;\n        }\n\n        removeCurrentRouteView();\n\n        _currentRouteViewID = componentID;\n        this.showViewComponent(_currentRouteViewID);\n\n        // Transition new view in\n        TweenLite.set(_routeViewMountPoint, {alpha: 0});\n        TweenLite.to(_routeViewMountPoint, 0.25, {alpha: 1, ease: Quad.easeIn});\n\n        this.notifySubscribersOf('viewChange', componentID);\n      }\n\n      /**\n       * Remove the currently displayed view\n       */\n      function removeCurrentRouteView() {\n        if (_currentRouteViewID) {\n          _this.getComponentViewMap()[_currentRouteViewID].controller.unmount();\n        }\n        _currentRouteViewID = '';\n      }\n\n      return {\n        initializeRouteViews   : initializeRouteViews,\n        showViewFromURLHash    : showViewFromURLHash,\n        showRouteViewComponent : showRouteViewComponent,\n        setViewMountPoint : setViewMountPoint,\n        getViewMountPoint : getViewMountPoint,\n        mapRouteToViewComponent: mapRouteToViewComponent\n      };\n\n    };\n\n    module.exports = MixinRouteViews();\n\n  });","/**\n * Base module for components\n * Must be extended with custom modules\n */\n\nndefine('nori/view/ViewComponent',\n  function (nrequire, module, exports) {\n\n    var ViewComponent = function () {\n\n      var _isInitialized = false,\n          _configProps,\n          _id,\n          _templateObj,\n          _html,\n          _DOMElement,\n          _mountPoint,\n          _children      = [],\n          _isMounted     = false,\n          _renderer      = nrequire('nori/utils/Renderer');\n\n      /**\n       * Initialization\n       * @param configProps\n       */\n      function initializeComponent(configProps) {\n        _configProps = configProps;\n        _id          = configProps.id;\n        _templateObj = configProps.template;\n        _mountPoint  = configProps.mountPoint;\n\n        this.setState(this.getInitialState());\n        this.setEvents(this.defineEvents());\n\n        this.createSubject('update');\n        this.createSubject('mount');\n        this.createSubject('unmount');\n\n        _isInitialized = true;\n      }\n\n      function defineEvents() {\n        return undefined;\n      }\n\n      /**\n       * Bind updates to the map ID to this view's update\n       * @param mapIDorObj Object to subscribe to or ID. Should implement nori/store/MixinObservableStore\n       */\n      function bindMap(mapIDorObj) {\n        var map;\n\n        if (is.object(mapIDorObj)) {\n          map = mapIDorObj;\n        } else {\n          map = Nori.store().getMap(mapIDorObj) || Nori.store().getMapCollection(mapIDorObj);\n        }\n\n        if (!map) {\n          console.warn('ViewComponent bindMap, map or mapcollection not found: ' + mapIDorObj);\n          return;\n        }\n\n        if (!is.function(map.subscribe)) {\n          console.warn('ViewComponent bindMap, map or mapcollection must be observable: ' + mapIDorObj);\n          return;\n        }\n\n        map.subscribe(this.update.bind(this));\n      }\n\n      /**\n       * Add a child\n       * @param child\n       */\n      //function addChild(child) {\n      //  _children.push(child);\n      //}\n\n      /**\n       * Remove a child\n       * @param child\n       */\n      //function removeChild(child) {\n      //  var idx = _children.indexOf(child);\n      //  _children[idx].unmount();\n      //  _children.splice(idx, 1);\n      //}\n\n      /**\n       * Before the view updates and a rerender occurs\n       * Returns nextState of component\n       */\n      function componentWillUpdate() {\n        return this.getState();\n      }\n\n      function update() {\n        var currentState = this.getState();\n        var nextState    = this.componentWillUpdate();\n\n        if (this.shouldComponentUpdate(nextState)) {\n          this.setState(nextState);\n          //_children.forEach(function updateChild(child) {\n          //  child.update();\n          //});\n\n          if (_isMounted) {\n            if (this.shouldComponentRender(currentState)) {\n              this.unmount();\n              this.componentRender();\n              this.mount();\n            }\n          }\n          this.notifySubscribersOf('update', this.getID());\n        }\n      }\n\n      /**\n       * Compare current state and next state to determine if updating should occur\n       * @param nextState\n       * @returns {*}\n       */\n      function shouldComponentUpdate(nextState) {\n        return is.existy(nextState);\n      }\n\n      /**\n       * Render it, need to add it to a parent container, handled in higher level view\n       * @returns {*}\n       */\n      function componentRender() {\n        //_children.forEach(function renderChild(child) {\n        //  child.componentRender();\n        //});\n\n        _html = this.render(this.getState());\n\n      }\n\n      /**\n       * May be overridden in a submodule for custom rendering\n       * Should return HTML\n       * @returns {*}\n       */\n      function render(state) {\n        return _templateObj(state);\n      }\n\n      /**\n       * Append it to a parent element\n       * @param mountEl\n       */\n      function mount() {\n        if (!_html) {\n          throw new Error('Component ' + _id + ' cannot mount with no HTML. Call render() first?');\n        }\n\n        _isMounted = true;\n\n        _DOMElement = (_renderer.render({\n          target: _mountPoint,\n          html  : _html\n        }));\n\n        if (this.delegateEvents) {\n          this.delegateEvents();\n        }\n\n        if (this.componentDidMount) {\n          this.componentDidMount();\n        }\n\n        this.notifySubscribersOf('mount', this.getID());\n      }\n\n      /**\n       * Call after it's been added to a view\n       */\n      function componentDidMount() {\n        // stub\n      }\n\n      /**\n       * Call when unloading\n       */\n      function componentWillUnmount() {\n        // stub\n      }\n\n      function unmount() {\n        this.componentWillUnmount();\n        _isMounted = false;\n\n        if (this.undelegateEvents) {\n          this.undelegateEvents();\n        }\n\n        _renderer.render({\n          target: _mountPoint,\n          html  : ''\n        });\n\n        _html       = '';\n        _DOMElement = null;\n        this.notifySubscribersOf('unmount', this.getID());\n      }\n\n      //----------------------------------------------------------------------------\n      //  Accessors\n      //----------------------------------------------------------------------------\n\n      function isInitialized() {\n        return _isInitialized;\n      }\n\n      function getConfigProps() {\n        return _configProps;\n      }\n\n      function isMounted() {\n        return _isMounted;\n      }\n\n      function getInitialState() {\n        this.setState({});\n      }\n\n      function getID() {\n        return _id;\n      }\n\n      function getDOMElement() {\n        return _DOMElement;\n      }\n\n      function getTemplate() {\n        return _templateObj;\n      }\n\n      function setTemplate(html) {\n        _templateObj = _.template(html);\n      }\n\n      //function getChildren() {\n      //  return _children.slice(0);\n      //}\n\n\n      //----------------------------------------------------------------------------\n      //  API\n      //----------------------------------------------------------------------------\n\n      return {\n        initializeComponent: initializeComponent,\n        defineEvents       : defineEvents,\n        isInitialized      : isInitialized,\n        getConfigProps     : getConfigProps,\n        getInitialState    : getInitialState,\n        getID              : getID,\n        getTemplate        : getTemplate,\n        setTemplate        : setTemplate,\n        getDOMElement      : getDOMElement,\n        isMounted          : isMounted,\n\n        bindMap: bindMap,\n\n        componentWillUpdate  : componentWillUpdate,\n        shouldComponentUpdate: shouldComponentUpdate,\n        update               : update,\n\n        componentRender: componentRender,\n        render         : render,\n\n        mount            : mount,\n        componentDidMount: componentDidMount,\n\n        componentWillUnmount: componentWillUnmount,\n        unmount             : unmount\n\n        //addChild   : addChild,\n        //removeChild: removeChild,\n        //getChildren: getChildren\n      };\n\n    };\n\n    module.exports = ViewComponent;\n\n  });","var Nori = (function () {\n\n  var _dispatcher = nrequire('nori/utils/Dispatcher'),\n      _router     = nrequire('nori/utils/Router');\n\n  // Switch Lodash to use Mustache style templates\n  _.templateSettings.interpolate = /{{([\\s\\S]+?)}}/g;\n\n  //----------------------------------------------------------------------------\n  //  Accessors\n  //----------------------------------------------------------------------------\n\n  function getDispatcher() {\n    return _dispatcher;\n  }\n\n  function getRouter() {\n    return _router;\n  }\n\n  function getConfig() {\n    return _.assign({}, (window.APP_CONFIG_DATA || {}));\n  }\n\n  function getCurrentRoute() {\n    return _router.getCurrentRoute();\n  }\n\n  //----------------------------------------------------------------------------\n  //  Factories - concatenative inheritance, decorators\n  //----------------------------------------------------------------------------\n\n  /**\n   * Merges a collection of objects\n   * @param target\n   * @param sourceArray\n   * @returns {*}\n   */\n  function assignArray(target, sourceArray) {\n    sourceArray.forEach(function (source) {\n      target = _.assign(target, source);\n    });\n    return target;\n  }\n\n  /**\n   * Create a new Nori application instance\n   * @param custom\n   * @returns {*}\n   */\n  function createApplication(custom) {\n    custom.mixins.push(this);\n    return buildFromMixins(custom);\n  }\n\n  /**\n   * Creates main application store\n   * @param custom\n   * @returns {*}\n   */\n  function createStore(custom) {\n    return function cs() {\n      return _.assign({}, buildFromMixins(custom));\n    };\n  }\n\n  /**\n   * Creates main application view\n   * @param custom\n   * @returns {*}\n   */\n  function createView(custom) {\n    return function cv() {\n      return _.assign({}, buildFromMixins(custom));\n    };\n  }\n\n  /**\n   * Mixes in the modules specified in the custom application object\n   * @param sourceObject\n   * @returns {*}\n   */\n  function buildFromMixins(sourceObject) {\n    var mixins;\n\n    if (sourceObject.mixins) {\n      mixins = sourceObject.mixins;\n    }\n\n    mixins.push(sourceObject);\n    return assignArray({}, mixins);\n  }\n\n  //----------------------------------------------------------------------------\n  // Functional utils from Mithril\n  //  https://github.com/lhorie/mithril.js/blob/next/mithril.js\n  //----------------------------------------------------------------------------\n\n  // http://mithril.js.org/mithril.prop.html\n  function prop(store) {\n    //if (isFunction(store.then)) {\n    //  // handle a promise\n    //}\n    var gettersetter = function () {\n      if (arguments.length) {\n        store = arguments[0];\n      }\n      return store;\n    };\n\n    gettersetter.toJSON = function () {\n      return store;\n    };\n\n    return gettersetter;\n  }\n\n  // http://mithril.js.org/mithril.withAttr.html\n  function withAttr(prop, callback, context) {\n    return function (e) {\n      e = e || event;\n\n      var currentTarget = e.currentTarget || this,\n          cntx          = context || this;\n\n      callback.call(cntx, prop in currentTarget ? currentTarget[prop] : currentTarget.getAttribute(prop));\n    };\n  }\n\n  //----------------------------------------------------------------------------\n  //  API\n  //----------------------------------------------------------------------------\n\n  return {\n    config           : getConfig,\n    dispatcher       : getDispatcher,\n    router           : getRouter,\n    createApplication: createApplication,\n    createStore      : createStore,\n    createView       : createView,\n    buildFromMixins  : buildFromMixins,\n    getCurrentRoute  : getCurrentRoute,\n    assignArray      : assignArray,\n    prop             : prop,\n    withAttr         : withAttr\n  };\n\n}());\n\n\n"],"sourceRoot":"/source/"}