/*! app-framework 12-08-2015 */
define("nudoru/component/CoachMarksView",function(a,b){function c(a){h=document.getElementById(a),j=_.template(o)}function d(a,b){l.push({targetSelector:a,id:k++,shape:null,label:null,props:b})}function e(){l.forEach(function(a,b){var c,d=document.querySelector(a.targetSelector),e=d.getBoundingClientRect(),f=r.HTMLStrToNode(j(a));a.shape=f,h.appendChild(a.shape),TweenLite.set(a.shape,{alpha:0,x:e.left-m,y:e.top-m,width:a.props.width||e.width+2*m,height:a.props.height||e.height+2*m}),c=p.add({title:"",content:a.props.label,position:a.props.labelPosition,targetEl:a.shape,width:a.props.labelWidth||n,gutter:3,alwaysVisible:!0,type:"coachmark"}),TweenLite.set(c,{alpha:0}),TweenLite.to([c,a.shape],1,{alpha:1,ease:Quad.easeOut,delay:.5*b})})}function f(){i=s.subscribe(t.MODAL_COVER_HIDE,g),q.show(!0),q.setOpacity(.25),e()}function g(){q.hide(!0),i.dispose(),i=null,l.forEach(function(a){TweenLite.killDelayedCallsTo(a.shape),p.remove(a.shape),h.removeChild(a.shape),delete a.shape})}var h,i,j,k=1,l=[],m=5,n=250,o='<div id="#js__coachmark-shape-<%= id%>" class="coachmark__shape-<%= props.shape%>"></div>',p=a("nudoru/component/ToolTipView"),q=a("nudoru/component/ModalCoverView"),r=a("nudoru/browser/DOMUtils"),s=a("nudoru/component/Dispatcher"),t=a("nudoru/component/ComponentEvents");b.exports.initialize=c,b.exports.outlineElement=d,b.exports.show=f,b.exports.hide=g}),define("nudoru/component/Dispatcher",function(a,b){function c(a,b,c){return g[a]||(g[a]=[]),g[a]={once:c,handler:b,subject:new Rx.Subject},g[a].subject.subscribe(b)}function d(b,d,e){var f=a(d);if(f.hasOwnProperty("execute"))return c(b,f.execute,e);throw new Error("Emitter cannot map "+b+" to command "+d+": must have execute()")}function e(a,b){var c=g[a];c&&(c.subject.onNext(b),c.once&&(c.subject.onCompleted(),c.subject.dispose(),c=null))}function f(){var a=g;for(var b in a)hasOwnProp.call(a,b)&&a[b].subject.dispose();g={}}var g={};b.exports.subscribe=c,b.exports.subscribeCommand=d,b.exports.publish=e,b.exports.dispose=f}),define("nudoru/component/ComponentEvents",function(a,b){b.exports.MODAL_COVER_SHOW="MODAL_COVER_SHOW",b.exports.MODAL_COVER_HIDE="MODAL_COVER_HIDE",b.exports.MENU_SELECT="MENU_SELECT"}),define("nudoru/component/Templating",function(a,b){function c(a){if(h[a])return h[a];var b=document.getElementById(a),c="",d="";if(!b)throw new Error('nudoru/core/NTemplate, template not found: "'+a+'"');return c=b.innerHTML,d=g(c),h[a]=d,d}function d(a){if(i[a])return i[a];var b=_.template(c(a));return i[a]=b,b}function e(a,b){var c=d(a);return c(b)}function f(a,b){return j.HTMLStrToNode(e(a,b))}function g(a){return a.trim()}var h=Object.create(null),i=Object.create(null),j=a("nudoru/browser/DOMUtils");b.exports.getSource=c,b.exports.getTemplate=d,b.exports.asHTML=e,b.exports.asElement=f}),define("nudoru/component/ComponentViewUtils",function(a,b){function c(a){TweenLite.set(a,{css:{perspective:800,perspectiveOrigin:"50% 50%"}})}function d(a){TweenLite.set(a,{css:{transformStyle:"preserve-3d",backfaceVisibility:"hidden",transformOrigin:"50% 50%"}})}function e(a){TweenLite.set(a,{css:{transformStyle:"preserve-3d",backfaceVisibility:"hidden",transformPerspective:600,transformOrigin:"50% 50%"}})}b.exports.apply3DToContainer=c,b.exports.apply3DToComponentElement=d,b.exports.applyUnique3DToComponentElement=e}),define("nudoru/component/FloatImageView",function(a,b){function c(){o=s.getElementById(t),q=o.querySelector(".floatimage__caption"),x=!A.isIE&&!A.mobile.any(),m(),p=Rx.Observable.fromEvent(o,A.mouseClickEvtStr()).subscribe(function(){m()})}function d(a){k(a).forEach(function(a){y.wrapElement('<div class="floatimage__wrapper" />',a),a.addEventListener(A.mouseClickEvtStr(),h,!1),A.mobile.any()||(a.addEventListener("mouseover",f,!1),a.addEventListener("mouseout",g,!1))})}function e(a){w=a}function f(a){x?TweenLite.to(a.target.parentNode.parentNode,.25,{scale:1.1,ease:Circ.easeOut}):TweenLite.to(a.target.parentNode.parentNode,.25,{scale:1.1,ease:Circ.easeOut})}function g(a){x?TweenLite.to(a.target.parentNode.parentNode,.5,{scale:1,ease:Circ.easeOut}):TweenLite.to(a.target.parentNode.parentNode,.5,{scale:1,ease:Circ.easeOut})}function h(a){i(a.target)}function i(a){r="div"===a.tagName.toLowerCase()?a.querySelector("img"):a;var b,c,d,e,f=.75,g=r.getAttribute("src"),h=r.getAttribute("alt"),i=r.clientWidth,j=r.clientHeight,k=y.offset(r),m=i/j,n=1,p=window.innerWidth,s=window.innerHeight,t=w.scrollTop,u=w.scrollLeft,A=p/s,B=k.left-u,C=k.top-t;n=A>m?s*f/j:p*f/i,d=i*n,e=j*n,b=p/2-d/2-k.left+u,c=s/2-e/2-k.top+t;var D=y.HTMLStrToNode('<div class="'+v+'"></div>');if(D.style.backgroundImage='url("'+g+'")',D.style.left=B+"px",D.style.top=C+"px",D.style.width=i+"px",D.style.height=j+"px",o.appendChild(D),TweenLite.to(r,.25,{alpha:0,ease:Circ.easeOut}),x){var E,F=z.clamp((k.left-p/2)/4,-75,75);0>=F?(F=Math.min(F,-20),E="left top"):(F=Math.max(F,20),E="right top"),TweenLite.set(D,{css:{transformPerspective:1e3,transformStyle:"preserve-3d",backfaceVisibility:"hidden"}});var G=new TimelineLite;G.to(D,.25,{rotationZ:-15,rotationY:F,transformOrigin:E,y:"+50",ease:Back.easeInOut}),G.to(D,.5,{rotationZ:0,rotationY:0,transformOrigin:E,width:d,height:e,x:b,y:c,ease:Quad.easeOut})}else TweenLite.to(D,.5,{rotationY:0,width:d,height:e,x:b,y:c,ease:Circ.easeOut});l(),q.innerHTML=h.length>=1?"<p>"+h+"</p>":""}function j(a){a&&(w=s.body,k(a).forEach(function(a){a.removeEventListener("click",h),A.mobile.any()||(a.removeEventListener("mouseover",f),a.removeEventListener("mouseout",g))}))}function k(a){return y.isDomObj(a)?y.getQSElementsAsArray(a,u):[]}function l(){TweenLite.to(o,.25,{autoAlpha:1,ease:Circ.easeOut})}function m(){r&&(TweenLite.to(r,.1,{alpha:1,ease:Circ.easeOut}),r=null),TweenLite.to(o,.25,{autoAlpha:0,ease:Circ.easeOut,onComplete:n})}function n(){var a=o.querySelector("."+v);a&&o.removeChild(a)}var o,p,q,r,s=document,t="floatimage__cover",u=".floatimage__srcimage",v="floatimage__zoomedimage",w=s.body,x=!1,y=a("nudoru/browser/DOMUtils"),z=a("nudoru/core/NumberUtils"),A=a("nudoru/browser/BrowserInfo");b.exports.initialize=c,b.exports.apply=d,b.exports.setScrollingView=e,b.exports.remove=j}),define("nudoru/component/MessageBoxCreator",function(a,b){function c(a,b,c,d){return g.add({title:a,content:"<p>"+b+"</p>",type:g.type().DANGER,modal:c,width:400,buttons:[{label:"Close",id:"Close",type:"",icon:"times",onClick:d}]})}function d(a,b,c,d){return g.add({title:a,content:"<p>"+b+"</p>",type:g.type().DEFAULT,modal:d,width:400,buttons:[{label:"Cancel",id:"Cancel",type:"negative",icon:"times"},{label:"Proceed",id:"proceed",type:"positive",icon:"check",onClick:c}]})}function e(a,b,c,d){return g.add({title:a,content:'<p class="text-center padding-bottom-double">'+b+'</p><textarea name="response" class="input-text" type="text" style="width:400px; height:75px; resize: none" autofocus="true"></textarea>',type:g.type().DEFAULT,modal:d,width:450,buttons:[{label:"Cancel",id:"Cancel",type:"negative",icon:"times"},{label:"Proceed",id:"proceed",type:"positive",icon:"check",onClick:c}]})}function f(a,b,c,d,e){var f='<select class="spaced" style="width:450px;height:200px" name="selection" autofocus="true" size="20">';return c.forEach(function(a){f+='<option value="'+a.value+'" '+("true"===a.selected?"selected":"")+">"+a.label+"</option>"}),f+="</select>",g.add({title:a,content:'<p class="text-center padding-bottom-double">'+b+'</p><div class="text-center">'+f+"</div>",type:g.type().DEFAULT,modal:e,width:500,buttons:[{label:"Cancel",id:"Cancel",type:"negative",icon:"times"},{label:"OK",id:"ok",type:"positive",icon:"check",onClick:d}]})}var g=a("nudoru/component/MessageBoxView");b.exports.alert=c,b.exports.confirm=d,b.exports.prompt=e,b.exports.choice=f}),define("nudoru/component/MessageBoxView",function(a,b){function c(a){p=document.getElementById(a)}function d(a){var b=a.type||u.DEFAULT,c=f(a);return q.push(c),p.appendChild(c.element),e(b,c.element),g(c),C.applyUnique3DToComponentElement(c.element),TweenLite.set(c.element,{css:{zIndex:s,width:a.width?a.width:t}}),B.centerElementInViewPort(c.element),Draggable.create("#"+c.id,{bounds:window,onPress:function(){s=Draggable.zIndex}}),j(c.element),a.modal&&z.showNonDismissable(!0),c.id}function e(a,b){"default"!==a&&B.addClass(b,v[a])}function f(a){var b="js__messagebox-"+(r++).toString(),c={dataObj:a,id:b,modal:a.modal,element:y.asElement("template__messagebox--default",{id:b,title:a.title,content:a.content}),streams:[]};return c}function g(a){var b=a.dataObj.buttons;b||(b=[{label:"Close",type:"",icon:"times",id:"default-close"}]);var c=a.element.querySelector(".footer-buttons");B.removeAllElements(c),b.forEach(function(b){b.id=a.id+"-button-"+b.id;var d;d=b.hasOwnProperty("icon")?y.asElement(w,b):y.asElement(x,b),c.appendChild(d);var e=Rx.Observable.fromEvent(d,A.mouseClickEvtStr()).subscribe(function(){b.hasOwnProperty("onClick")&&b.onClick&&b.onClick.call(this,h(a.id)),i(a.id)});a.streams.push(e)})}function h(a){return B.captureFormData(o(a).element)}function i(a){var b,c=n(a);c>-1&&(b=q[c],k(b.element))}function j(a){TweenLite.to(a,0,{alpha:0,rotationX:45,scale:2}),TweenLite.to(a,.5,{alpha:1,rotationX:0,scale:1,ease:Circ.easeOut})}function k(a){TweenLite.to(a,.25,{alpha:0,rotationX:-45,scale:.25,ease:Circ.easeIn,onComplete:function(){l(a)}})}function l(a){var b=n(a.getAttribute("id")),c=q[b];c.streams.forEach(function(a){a.dispose()}),Draggable.get("#"+c.id).disable(),p.removeChild(a),q[b]=null,q.splice(b,1),m()}function m(){var a=!1;q.forEach(function(b){b.modal===!0&&(a=!0)}),a||z.hide(!0)}function n(a){return q.map(function(a){return a.id}).indexOf(a)}function o(a){return q.filter(function(b){return b.id===a})[0]}var p,q=[],r=0,s=1e3,t=400,u={DEFAULT:"default",INFORMATION:"information",SUCCESS:"success",WARNING:"warning",DANGER:"danger"},v={"default":"",information:"messagebox__information",success:"messagebox__success",warning:"messagebox__warning",danger:"messagebox__danger"},w="template__messagebox--button-icon",x="template__messagebox--button-noicon",y=a("nudoru/component/Templating"),z=a("nudoru/component/ModalCoverView"),A=a("nudoru/browser/BrowserInfo"),B=a("nudoru/browser/DOMUtils"),C=a("nudoru/component/ComponentViewUtils");b.exports.initialize=c,b.exports.add=d,b.exports.remove=i,b.exports.type=function(){return u}}),define("nudoru/component/ModalCoverView",function(a,b){function c(){p=!0,l=r.getElementById("modal__cover"),m=r.querySelector(".modal__background"),n=r.querySelector(".modal__close-button");var a=Rx.Observable.fromEvent(m,u.mouseClickEvtStr()),b=Rx.Observable.fromEvent(n,u.mouseClickEvtStr());o=Rx.Observable.merge(a,b).subscribe(function(){e()}),i(!1)}function d(){return p}function e(){q||i(!0)}function f(a){p=!0;var b=a?.25:0;TweenLite.to(l,b,{autoAlpha:1,ease:Quad.easeOut}),TweenLite.to(m,b,{alpha:1,ease:Quad.easeOut})}function g(a){p||(q=!1,f(a),TweenLite.set(n,{scale:2,alpha:0}),TweenLite.to(n,1,{autoAlpha:1,scale:1,ease:Bounce.easeOut,delay:1}),s.publish(t.MODAL_COVER_SHOW))}function h(a){p||(q=!0,f(a),TweenLite.to(n,0,{autoAlpha:0}))}function i(a){if(p){p=!1,q=!1;var b=a?.25:0;TweenLite.killDelayedCallsTo(n),TweenLite.to(l,b,{autoAlpha:0,ease:Quad.easeOut}),TweenLite.to(n,b/2,{autoAlpha:0,ease:Quad.easeOut}),s.publish(t.MODAL_COVER_HIDE)}}function j(a){(0>a||a>1)&&(console.log("nudoru/component/ModalCoverView: setOpacity: opacity should be between 0 and 1"),a=1),TweenLite.to(m,.25,{alpha:a,ease:Quad.easeOut})}function k(a,b,c){TweenLite.to(m,.25,{backgroundColor:"rgb("+a+","+b+","+c+")",ease:Quad.easeOut})}var l,m,n,o,p,q,r=document,s=a("nudoru/component/Dispatcher"),t=a("nudoru/component/ComponentEvents"),u=a("nudoru/browser/BrowserInfo");b.exports.initialize=c,b.exports.show=g,b.exports.showNonDismissable=h,b.exports.hide=i,b.exports.visible=d,b.exports.setOpacity=j,b.exports.setColor=k}),define("nudoru/component/ToastView",function(a,b){function c(a){m=document.getElementById(a)}function d(a){a.type=a.type||q.DEFAULT;var b=f(a.title,a.message);n.push(b),m.insertBefore(b.element,m.firstChild),e(a.type,b.element),v.apply3DToContainer(m),v.apply3DToComponentElement(b.element);var c=b.element.querySelector(".toast__item-controls > button"),d=Rx.Observable.fromEvent(c,t.mouseClickEvtStr()),i=Rx.Observable.interval(p);return b.defaultButtonStream=Rx.Observable.merge(d,i).take(1).subscribe(function(){g(b.id)}),h(b.element),b.id}function e(a,b){"default"!==a&&u.addClass(b,r[a])}function f(a,b){var c="js__toast-toastitem-"+(o++).toString(),d={id:c,element:s.asElement("template__component--toast",{id:c,title:a,message:b}),defaultButtonStream:null};return d}function g(a){var b,c=l(a);c>-1&&(b=n[c],k(c),i(b.element))}function h(a){TweenLite.to(a,0,{alpha:0}),TweenLite.to(a,1,{alpha:1,ease:Quad.easeOut}),k()}function i(a){TweenLite.to(a,.25,{rotationX:-45,alpha:0,ease:Quad.easeIn,onComplete:function(){j(a)}})}function j(a){var b=l(a.getAttribute("id")),c=n[b];c.defaultButtonStream.dispose(),m.removeChild(a),n[b]=null,n.splice(b,1)}function k(a){for(var b,c=n.length-1,d=0;c>-1;c--)c!==a&&(b=n[c],TweenLite.to(b.element,.75,{y:d,ease:Bounce.easeOut}),d+=10+b.element.clientHeight)}function l(a){return n.map(function(a){return a.id}).indexOf(a)}var m,n=[],o=0,p=7e3,q={DEFAULT:"default",INFORMATION:"information",SUCCESS:"success",WARNING:"warning",DANGER:"danger"},r={"default":"",information:"toast__information",success:"toast__success",warning:"toast__warning",danger:"toast__danger"},s=a("nudoru/component/Templating"),t=a("nudoru/browser/BrowserInfo"),u=a("nudoru/browser/DOMUtils"),v=a("nudoru/component/ComponentViewUtils");b.exports.initialize=c,b.exports.add=d,b.exports.remove=g,b.exports.type=function(){return q}}),define("nudoru/component/ToolTipView",function(a,b){function c(a){s=document.getElementById(a)}function d(a){a.type=a.type||w.DEFAULT;var b=f(a.title,a.content,a.position,a.targetEl,a.gutter,a.alwaysVisible);return t.push(b),s.appendChild(b.element),b.arrowEl=b.element.querySelector(".arrow"),e(a.type,a.position,b.element),TweenLite.set(b.element,{css:{autoAlpha:b.alwaysVisible?1:0,width:a.width?a.width:v}}),b.width=b.element.getBoundingClientRect().width,b.height=b.element.getBoundingClientRect().height,g(b),i(b),(b.position===y.L||b.position===y.R)&&k(b),(b.position===y.T||b.position===y.B)&&j(b),b.element}function e(a,b,c){"default"!==a&&B.addClass(c,x[a]),B.addClass(c,z[b])}function f(a,b,c,d,e,f){var g="js__tooltip-tooltipitem-"+(u++).toString(),h={id:g,position:c,targetEl:d,alwaysVisible:f||!1,gutter:e||15,elOverStream:null,elOutStream:null,height:0,width:0,element:A.asElement("template__component--tooltip",{id:g,title:a,message:b}),arrowEl:null};return h}function g(a){a.alwaysVisible||(a.elOverStream=Rx.Observable.fromEvent(a.targetEl,"mouseover").subscribe(function(){h(a.id)}),a.elOutStream=Rx.Observable.fromEvent(a.targetEl,"mouseout").subscribe(function(){l(a.id)}))}function h(a){var b=p(a);b.alwaysVisible||(i(b),m(b.element))}function i(a){var b=a.gutter,c=0,d=0,e=a.targetEl.getBoundingClientRect();a.position===y.TL?(c=e.left-a.width,d=e.top-a.height):a.position===y.T?(c=e.left+(e.width/2-a.width/2),d=e.top-a.height-b):a.position===y.TR?(c=e.right,d=e.top-a.height):a.position===y.R?(c=e.right+b,d=e.top+(e.height/2-a.height/2)):a.position===y.BR?(c=e.right,d=e.bottom):a.position===y.B?(c=e.left+(e.width/2-a.width/2),d=e.bottom+b):a.position===y.BL?(c=e.left-a.width,d=e.bottom):a.position===y.L&&(c=e.left-a.width-b,d=e.top+(e.height/2-a.height/2)),TweenLite.set(a.element,{x:c,y:d})}function j(a){var b=a.arrowEl.getBoundingClientRect();TweenLite.set(a.arrowEl,{x:a.width/2-b.width/2})}function k(a){var b=a.arrowEl.getBoundingClientRect();TweenLite.set(a.arrowEl,{y:a.height/2-b.height/2-2})}function l(a){var b=p(a);b.alwaysVisible||n(b.element)}function m(a){TweenLite.to(a,.5,{autoAlpha:1,ease:Circ.easeOut})}function n(a){TweenLite.to(a,.05,{autoAlpha:0,ease:Circ.easeOut})}function o(a){r(a).forEach(function(a){a.elOverStream&&a.elOverStream.dispose(),a.elOutStream&&a.elOutStream.dispose(),TweenLite.killDelayedCallsTo(a.element),s.removeChild(a.element);var b=q(a.id);t[b]=null,t.splice(b,1)})}function p(a){return t.filter(function(b){return b.id===a})[0]}function q(a){return t.map(function(a){return a.id}).indexOf(a)}function r(a){return t.filter(function(b){return b.targetEl===a})}var s,t=[],u=0,v=200,w={DEFAULT:"default",INFORMATION:"information",SUCCESS:"success",WARNING:"warning",DANGER:"danger",COACHMARK:"coachmark"},x={"default":"",information:"tooltip__information",success:"tooltip__success",warning:"tooltip__warning",danger:"tooltip__danger",coachmark:"tooltip__coachmark"},y={T:"T",TR:"TR",R:"R",BR:"BR",B:"B",BL:"BL",L:"L",TL:"TL"},z={T:"tooltip__top",TR:"tooltip__topright",R:"tooltip__right",BR:"tooltip__bottomright",B:"tooltip__bottom",BL:"tooltip__bottomleft",L:"tooltip__left",TL:"tooltip__topleft"},A=a("nudoru/component/Templating"),B=a("nudoru/browser/DOMUtils");b.exports.initialize=c,b.exports.add=d,b.exports.remove=o,b.exports.type=function(){return w},b.exports.position=function(){return y}});