/*! app-framework 13-08-2015 */
define("nori/utils/Dispatcher",function(a,b){function c(a,b,c,d){var e=window;if(falsey(a))throw new Error("Fasley event string passed for handler",b);if(falsey(b))throw new Error("Fasley handler passed for event string",a);(c||c===!1)&&(c===!0||c===!1?d=c:e=c),p[a]||(p[a]=[]);var f=new Rx.Subject;return p[a].push({once:d,priority:0,handler:b,context:e,subject:f,type:0}),f.subscribe(b.bind(e))}function d(){return m?void o.onNext(!0):(o=new Rx.Subject,m=Rx.Observable.interval(1).pausable(o),void(n=m.subscribe(e)))}function e(){var a=t.shift();a?(g(a),h(a)):o.onNext(!1)}function f(a){s.push(a),t.push(a),d()}function g(a){for(var b in q)q[b].handler(a)}function h(a){var b,c=p[a.type];if(c)for(b=c.length;b--;){var d=c[b];0===d.type&&d.subject.onNext(a),d.once&&i(a.type,d.handler)}}function i(a,b){if(void 0!==p[a]){for(var c=p[a],d=-1,e=0,f=c.length;f>e;e++)c[e].handler===b&&(d=e,c[e].subject.onCompleted(),c[e].subject.dispose(),c[e]=null);-1!==d&&(c.splice(d,1),0===c.length&&delete p[a])}}function j(){return s.slice(0)}function k(a){var b="ID_"+r++;return q[b]={id:b,handler:a},b}function l(a){q.hasOwnProperty(a)&&delete q[a]}var m,n,o,p={},q={},r=0,s=[],t=[];b.exports.subscribe=c,b.exports.unsubscribe=i,b.exports.publish=f,b.exports.getLog=j,b.exports.registerReceiver=k,b.exports.unregisterReceiver=l}),define("nori/utils/Renderer",function(a,b){function c(){Nori.dispatcher().subscribe(f.RENDER_VIEW,d)}function d(a){var b,c=a.payload.target,d=a.payload.html,f=document.querySelector(c),h=a.payload.callback;f.innerHTML="",d&&(b=g.HTMLStrToNode(d),f.appendChild(b)),h&&h(b),e.viewRendered(c,a.payload.id)}var e=a("nori/events/EventCreator"),f=a("nori/events/EventConstants"),g=a("nudoru/browser/DOMUtils");b.exports.initialize=c}),define("nori/utils/Router",function(a,b){function c(){window.addEventListener("hashchange",e,!1)}function d(a,b){m[a]={templateID:b.templateID,controller:b.controller}}function e(){o.urlHashChanged({routeObj:f(),fragment:k()})}function f(){var a=k(),b=a.split("?"),c="/"+b[0],d=decodeURIComponent(b[1]),e=h(d);return"=undefined"===d&&(d="",e={}),{route:c,data:e}}function g(){var a=f();i(a.route,a.data)}function h(a){var b={},c=a.split("&");return c.forEach(function(a){var c=a.split("=");b[c[0]]=c[1]}),b}function i(a,b){var c=m[a];c?c.controller.call(window,{route:a,templateID:c.templateID,queryData:b}):console.log('No Route mapped for: "'+a+'"')}function j(a,b){var c=a,d=[];if(!n.isNull(b)){c+="?";for(var e in b)"undefined"!==e&&b.hasOwnProperty(e)&&d.push(e+"="+encodeURIComponent(b[e]));c+=d.join("&")}console.log("Router, setting URL fragment to: ",c),l(c)}function k(){var a=location.hash.slice(1);return a.toString().replace(/\/$/,"").replace(/^\//,"")}function l(a){window.location.hash=a}var m=Object.create(null),n=a("nudoru/core/ObjectUtils"),o=a("nori/events/EventCreator");b.exports.initialize=c,b.exports.when=d,b.exports.getCurrentRoute=f,b.exports.runCurrentRoute=g,b.exports.setRoute=j}),define("nori/utils/Templating",function(a,b){function c(a){if(i[a])return i[a];var b,c,d=document.getElementById(a);if(!d)throw new Error('nudoru/core/NTemplate, template not found: "'+a+'"');return b=d.innerHTML,c=g(b),i[a]=c,c}function d(a){if(j[a])return j[a];var b=_.template(c(a));return j[a]=b,b}function e(a,b){var c=d(a);return c(b)}function f(a,b){return k.HTMLStrToNode(e(a,b))}function g(a){return a.trim()}function h(a,b){var c=document.createElement("script");c.type="text/template",c.id=a,c.innerHTML=b,document.getElementsByTagName("head")[0].appendChild(c)}var i=Object.create(null),j=Object.create(null),k=a("nudoru/browser/DOMUtils");b.exports.getSource=c,b.exports.getTemplate=d,b.exports.asHTML=e,b.exports.asElement=f,b.exports.addClientSideTemplateToDOM=h}),define("nori/events/EventConstants",function(a,b){var c=a("nudoru/core/ObjectUtils");_.merge(b.exports,c.keyMirror({APP_WARNING:null,APP_ERROR:null,APP_INITIALIZED:null,APP_MODEL_INITIALIZED:null,APP_VIEW_INITIALIZED:null,ALERT_USER:null,WARN_USER:null,NOTIFY_USER:null,MODEL_DATA_WAITING:null,MODEL_DATA_READY:null,MODEL_DATA_CHANGED:null,MODEL_DATA_SAVED:null,MODEL_DATA_DESTROYED:null,MODEL_STATE_CHANGED:null,UPDATE_MODEL_DATA:null,RESUME_FROM_MODEL_STATE:null,VIEW_INITIALIZED:null,VIEW_RENDERED:null,VIEW_CHANGED:null,VIEW_CHANGE_TO_MOBILE:null,VIEW_CHANGE_TO_DESKTOP:null,ROUTE_CHANGED:null,CHANGE_ROUTE:null,RENDER_VIEW:null}))}),define("nori/events/EventCreator",function(a,b){var c=a("nori/events/EventConstants"),d=a("nudoru/browser/EventConstants");b.exports.applicationWarning=function(a){var b={type:c.APP_WARNING,error:!1,payload:{message:a}};return Nori.dispatcher().publish(b),b},b.exports.applicationError=function(a){var b={type:c.APP_ERROR,error:!0,payload:new Error(a)};return Nori.dispatcher().publish(b),b},b.exports.applicationInitialized=function(a){var b={type:c.APP_INITIALIZED,payload:a};return Nori.dispatcher().publish(b),b},b.exports.notifyUser=function(a,b,d){var e={type:c.NOTIFY_USER,payload:{title:a,message:b,type:d||"default"}};return Nori.dispatcher().publish(e),e},b.exports.alertUser=function(a,b,d){var e={type:c.ALERT_USER,payload:{title:a,message:b,type:d||"default"}};return Nori.dispatcher().publish(e),e},b.exports.warnUser=function(a,b,d){var e={type:c.WARN_USER,payload:{title:a,message:b,type:d||"danger"}};return Nori.dispatcher().publish(e),e},b.exports.applicationModelInitialized=function(a){var b={type:c.APP_MODEL_INITIALIZED,payload:a};return Nori.dispatcher().publish(b),b},b.exports.applicationViewInitialized=function(a){var b={type:c.APP_VIEW_INITIALIZED,payload:a};return Nori.dispatcher().publish(b),b},b.exports.urlHashChanged=function(a){var b={type:d.URL_HASH_CHANGED,payload:a};return Nori.dispatcher().publish(b),b},b.exports.viewChanged=function(a){var b={type:c.VIEW_CHANGED,payload:a};return Nori.dispatcher().publish(b),b},b.exports.changeRoute=function(a,b){var d={type:c.CHANGE_ROUTE,payload:{route:a,data:b}};return Nori.dispatcher().publish(d),d},b.exports.routeChanged=function(a){var b={type:c.ROUTE_CHANGED,payload:a};return Nori.dispatcher().publish(b),b},b.exports.updateModelData=function(a,b){var d={type:c.UPDATE_MODEL_DATA,payload:{id:a,data:b}};return Nori.dispatcher().publish(d),d},b.exports.modelChanged=function(a){var b={type:c.MODEL_DATA_CHANGED,payload:a};return Nori.dispatcher().publish(b),b},b.exports.modelStateChanged=function(a){var b={type:c.MODEL_STATE_CHANGED,payload:a};return Nori.dispatcher().publish(b),b},b.exports.renderView=function(a,b,d,e){var f={type:c.RENDER_VIEW,payload:{target:a,html:b,id:d,callback:e}};return Nori.dispatcher().publish(f),f},b.exports.viewRendered=function(a,b){var d={type:c.VIEW_RENDERED,payload:{target:a,id:b}};return Nori.dispatcher().publish(d),d},b.exports.viewChangedToMobile=function(a){var b={type:c.VIEW_CHANGE_TO_MOBILE,payload:a};return Nori.dispatcher().publish(b),b},b.exports.viewChangedToDesktop=function(a){var b={type:c.VIEW_CHANGE_TO_DESKTOP,payload:a};return Nori.dispatcher().publish(b),b},b.exports.browserScrolled=function(a){var b={type:d.BROWSER_SCROLLED,payload:a};return Nori.dispatcher().publish(b),b},b.exports.browserResized=function(a){var b={type:d.BROWSER_RESIZED,payload:a};return Nori.dispatcher().publish(b),b}}),define("nori/service/rest",function(a,b){function c(a){var b=new XMLHttpRequest,c=a.json||!1,d=a.method.toUpperCase()||"GET",e=a.url,f=a.data||null;return new Promise(function(g,h){function i(a,b){b=b||"",h(a+" "+b)}b.open(d,e,!0,a.user,a.password),b.onreadystatechange=function(){if(4===b.readyState)if(b.status>=200&&b.status<300)try{g(c?JSON.parse(b.responseText):b.responseText)}catch(a){i("Result","Error parsing JSON result")}else i(b.status,b.statusText)},b.onerror=function(){return i("Network error")},b.ontimeout=function(){return i("Timeout")},b.onabort=function(){return i("About")},c&&"GET"!==d?b.setRequestHeader("Content-Type","application/json; charset=utf-8"):c&&"GET"===d&&b.setRequestHeader("Accept","application/json, text/*; odata=verbose"),b.send(f)})}b.exports.request=c}),define("nori/model/ApplicationModel",function(a,b){function c(a,b){var c=Nori.extendWithArray({},[requireNew("nori/model/MapCollection"),b]);return c.initialize(a),g[a.id]=c,c}function d(a,b){var c=Nori.extendWithArray({},[requireNew("nori/model/Map"),b]);return c.initialize(a),h[a.id]=c,c}function e(a){return h[a]}function f(a){return g[a]}var g=Object.create(null),h=Object.create(null);b.exports.createMapCollection=c,b.exports.createMap=d,b.exports.getMap=e,b.exports.getMapCollection=f}),define("nori/model/Map",function(a,b){function c(a){if(!a.id)throw new Error("Model must be init'd with an id");C=a.id,H=a.silent||!1,a.store?(E=!0,G=a.store):a.json&&d(a.json)}function d(a){E=!0;try{G=JSON.parse(a)}catch(b){throw new Error("MapCollection, error parsing JSON:",a,b)}}function e(){return C}function f(){G={},E=!0}function g(){return E}function h(){E=!1}function i(a,b){var c=!1;"object"==typeof a?(null!==b&&"object"==typeof b&&(c=b.silent||!1),G=_.merge({},G,a)):G[a]=b,E=!0,c||y("set_key")}function j(a,b,c){G[a][b]=c,E=!0,y("set_key")}function k(a){var b=m(a)?G[a]:void 0;return b&&(b=_.cloneDeep(b)),b}function l(a,b){var c=m(a)?G[a]:void 0,d=null;return c&&(d=_.cloneDeep(c[b])),d}function m(a){return G.hasOwnProperty(a)}function n(){if(!E&&F)return F;var a=[];for(var b in G)a.push({key:b,value:G[b]});return F=a,E=!1,a}function o(){return p().length}function p(){return Object.keys(G)}function q(){return n().map(function(a){return a.value})}function r(a){delete G[a]}function s(a){return q().filter(a)}function t(){return n()[0]}function u(){var a=n();return a[a.length-1]}function v(a){return n()[a]}function w(){return _.merge({},G)}function x(a){var b=Object.create(null);for(var c in a)G.hasOwnProperty(c)&&(b[a[c]]=G[c]);return b}function y(a){a=a||"map",H||I.modelChanged({id:C,mapType:"model"}),D.dispatchChange&&D.dispatchChange({id:C},a)}function z(){return JSON.stringify(G)}function A(a){D=a}function B(){return D}var C,D,E=!1,F=[],G=Object.create(null),H=!1,I=a("nori/events/EventCreator");b.exports.initialize=c,b.exports.getID=e,b.exports.clear=f,b.exports.isDirty=g,b.exports.markClean=h,b.exports.setJSON=d,b.exports.set=i,b.exports.setKeyProp=j,b.exports.get=k,b.exports.getKeyProp=l,b.exports.has=m,b.exports.remove=r,b.exports.keys=p,b.exports.values=q,b.exports.entries=n,b.exports.filterValues=s,b.exports.size=o,b.exports.getFirst=t,b.exports.getLast=u,b.exports.getAtIndex=v,b.exports.toObject=w,b.exports.transform=x,b.exports.toJSON=z,b.exports.setParentCollection=A,b.exports.getParentCollection=B}),define("nori/model/MapCollection",function(a,b){function c(a){if(!a.id)throw new Error("ModelCollection must be init'd with an id");C=this,D=a.id,G=a.silent||!1,a.models&&f.call(C,a.models)}function d(){var a=!1;return w(function(b){b.isDirty()&&(a=!0)}),a}function e(){w(function(a){a.markClean()})}function f(a){a.forEach(function(a){j(a)})}function g(a,b,c){a.forEach(function(a){var d;d=a.hasOwnProperty(b)?a[b]:D+"child"+F.length,j(Nori.model().createMap({id:d,silent:c,store:a}))}),o(D,"add_map")}function h(a,b,c){a.forEach(function(a){var d,e;try{e=JSON.parse(a)}catch(f){throw new Error("MapCollection, error parsing JSON:",a,f)}d=e.hasOwnProperty(b)?e[b]:D+"child"+F.length,j(Nori.model().createMap({id:d,silent:c,store:e}))}),o(D,"add_map")}function i(){return D}function j(a){var b=n(a.getID());a.setParentCollection(C),b>=0?F[b]=a:F.push(a),o(D,"add_map")}function k(a){var b=n(a);b>=0?(F[b].setParentCollection(null),F[b]=null,F.splice(b,1),o(D,"remove_map")):console.log(D+" remove, model not in collection: "+a)}function l(){F.forEach(function(a){a.setParentCollection(null)}),F=[],o(D,"remove_map")}function m(a){return F.filter(function(b){return b.getID()===a})[0]}function n(a){return F.map(function(a){return a.getID()}).indexOf(a)}function o(a,b){G||(b=b||"",H.modelChanged({id:D,type:b,mapType:"collection",mapID:a.id})),E&&E.dispatchChange({id:D,store:m()})}function p(a){return F[a]}function q(){return F.length}function r(){return F[0]}function s(){return F[F.length-1]}function t(a){return F[a]}function u(a){return F.filter(a)}function v(a,b){return F.filter(function(c){return c.get(a)===b})}function w(a){return F.forEach(a)}function x(a){return F.map(a)}function y(){var a=[];return F.forEach(function(b){a.push(b.entries())}),a}function z(){return JSON.stringify(F)}function A(a){E=a}function B(){return E}var C,D,E,F=[],G=!1,H=a("nori/events/EventCreator");b.exports.initialize=c,b.exports.getID=i,b.exports.isDirty=d,b.exports.markClean=e,b.exports.add=j,b.exports.addMapsFromArray=f,b.exports.addFromObjArray=g,b.exports.addFromJSONArray=h,b.exports.remove=k,b.exports.removeAll=l,b.exports.getMap=m,b.exports.hasMap=p,b.exports.size=q,b.exports.getFirst=r,b.exports.getLast=s,b.exports.getAtIndex=t,b.exports.filter=u,b.exports.filterByKey=v,b.exports.forEach=w,b.exports.map=x,b.exports.entries=y,b.exports.toJSON=z,b.exports.dispatchChange=o,b.exports.setParentCollection=A,b.exports.getParentCollection=B}),define("nori/model/MixinReducerModel",function(a,b){function c(){return m.getState()}function d(a){m.setState(a)}function e(a){n=a}function f(a){n.push(a)}function g(){if(l=this,Nori.dispatcher().registerReceiver(h),!n)throw new Error("ReducerModel, must set a reducer before initialization");i({})}function h(a){console.log("ReducerModel Event occured: ",a),i(a)}function i(a){var b=k(c(),a);d(b),l.handleStateMutation()}function j(){}function k(a,b){return a=a||{},n.forEach(function(c){a=c(a,b)}),a}var l,m=requireNew("nori/model/SimpleStore"),n=[];b.exports.initializeReducerModel=g,b.exports.getState=c,b.exports.setState=d,b.exports.handleApplicationEvents=h,b.exports.setReducers=e,b.exports.addReducer=f,b.exports.applyReducers=i,b.exports.applyReducersToState=k,b.exports.handleStateMutation=j}),define("nori/model/SimpleStore",function(a,b){function c(){return _.assign({},e)}function d(a){e=a}var e=Object.create(null);b.exports.getState=c,b.exports.setState=d}),define("nori/view/ApplicationView",function(a,b){function c(){return r}function d(){return s}function e(a){q=this,t.initialize(),f(a),g(),h()}function f(a){if(a){var b=document.querySelector("body");a.forEach(function(a){b.appendChild(u.HTMLStrToNode(q.template().getSource("template__"+a,{})))})}}function g(){r=document.getElementById("app__container"),s=document.getElementById("app__contents")}function h(){w.initialize("tooltip__container"),v.initialize("toast__container"),x.initialize("messagebox__container"),z.initialize()}function i(){}function j(){return y}function k(a){return x.add(a)}function l(a){x.remove(a)}function m(a,b){return j().alert(b||"Alert",a)}function n(a){return v.add(a)}function o(a,b,c){return n({title:b||"",type:c||v.type().DEFAULT,message:a})}function p(){var a=document.querySelector("#initialization__cover"),b=document.querySelector(".initialization__message");TweenLite.to(a,1,{alpha:0,ease:Quad.easeOut,onComplete:function(){a.parentNode.removeChild(a)}}),TweenLite.to(b,2,{top:"+=50px",ease:Quad.easeIn,onComplete:function(){a.removeChild(b)}})}var q,r,s,t=a("nori/utils/Renderer"),u=a("nudoru/browser/DOMUtils"),v=a("nudoru/component/ToastView"),w=a("nudoru/component/ToolTipView"),x=a("nudoru/component/MessageBoxView"),y=a("nudoru/component/MessageBoxCreator"),z=a("nudoru/component/ModalCoverView");b.exports.initializeApplicationView=e,b.exports.initializeApplicationElements=g,b.exports.initializeComponents=h,b.exports.mbCreator=j,b.exports.addMessageBox=k,b.exports.removeMessageBox=l,b.exports.addNotification=n,b.exports.alert=m,b.exports.notify=o,b.exports.removeLoadingMessage=p,b.exports.layoutUI=i,b.exports.getAppContainerEl=c,b.exports.getAppEl=d}),define("nori/view/MixinBrowserEvents",function(a,b){function c(){k(),m(),e()}function d(a){t=a}function e(){var a=Rx.Observable.fromEvent(window,"resize"),b=Rx.Observable.fromEvent(_mainScrollEl,"scroll");q=Rx.Observable.merge(a,b).subscribe(function(){n()}),s=Rx.Observable.fromEvent(window,"resize").throttle(100).subscribe(function(){h()}),r=Rx.Observable.fromEvent(_mainScrollEl,"scroll").throttle(100).subscribe(function(){i()})}function f(){return _mainScrollEl}function g(a){_mainScrollEl=document.getElementById(a)}function h(){u.browserResized(o)}function i(){u.browserScrolled(p)}function j(){return o}function k(){o={width:window.innerWidth,height:window.innerHeight}}function l(){return p}function m(){var a=_mainScrollEl?_mainScrollEl:document.body,b=a.scrollLeft,c=a.scrollTop;b=b?b:0,c=c?c:0,p={left:b,top:c}}function n(){m(),k(),t.call(this,o,p)}var o,p,q,r,s,t,u=a("nori/events/EventCreator");b.exports.initializeBrowserWindowEventStreams=c,b.exports.setPositionUIElementsOnChangeCB=d,b.exports.getMainScrollingView=f,b.exports.setMainScrollingView=g,b.exports.getCurrentViewPortSize=j,b.exports.getCurrentViewPortScroll=l}),define("nori/view/MixinComponentViews",function(a,b){function c(a){o=a}function d(){return q}function e(a,b,c,d){"string"==typeof b&&(b=requireNew(b)),r[a]={htmlTemplate:q.getTemplate(s+a),controller:f(b),isRouteView:c,mountPoint:d}}function f(a){return Nori.extendWithArray({},[requireNew("nori/view/ViewComponent"),requireNew("nori/view/MixinEventDelegator"),a])}function g(a,b){e(a,b,!0,o)}function h(a,b){var c=r[a];if(!c)throw new Error("No componentView mapped for id: "+a);c.controller=Nori.extendWithArray(c.controller,b)}function i(a){var b=r[a];b.controller.update&&b.controller.update()}function j(a){var b=r[a];if(!b)throw new Error("No componentView mapped for id: "+a);b.controller.initialize({id:a,template:b.htmlTemplate,mountPoint:b.mountPoint}),b.controller.update(),b.controller.render(),b.controller.mount()}function k(a){l(),p=a.templateID,j(p),TweenLite.set(o,{alpha:0}),TweenLite.to(o,.25,{alpha:1,ease:Quad.easeIn}),t.viewChanged(p)}function l(){p&&r[p].controller.unmount(),p=""}function m(a,b,c){e(a,b,!1,c)}function n(a){j(a)}var o,p,q=a("nori/utils/Templating"),r=Object.create(null),s="template__",t=a("nori/events/EventCreator");b.exports.setRouteViewMountPoint=c,b.exports.template=d,b.exports.createViewComponent=m,b.exports.renderComponent=n,b.exports.mapViewComponent=e,b.exports.showViewComponent=j,b.exports.mapRouteToViewComponent=g,b.exports.showRouteViewComponent=k,b.exports.updateViewComponent=i,b.exports.applyMixin=h}),define("nori/view/MixinEventDelegator",function(a,b){function c(a){g=a}function d(){return g}function e(){if(g){h=Object.create(null);for(var a in g)if(g.hasOwnProperty(a)){var b=a.split(",");b.forEach(function(b){b=b.trim();var c=b.split(" ")[0].trim(),d=b.split(" ")[1].trim(),e=document.querySelector(d);e?h[a]=Rx.Observable.fromEvent(e,c).subscribe(g[a]):console.log("Cannot add event to invalid DOM element: "+d)})}}}function f(){if(g){for(var a in h)h[a].dispose(),delete h[a];h=Object.create(null)}}var g,h;b.exports.setEvents=c,b.exports.getEvents=d,b.exports.undelegateEvents=f,b.exports.delegateEvents=e}),define("nori/view/MixinMultiDevice",function(a,b){function c(){r=!1,s=750,t=475,u=250,v=!1,p=document.getElementById("app__contents"),m=document.getElementById("drawer"),n=document.querySelector(".drawer__menu-spinner-button > input"),m&&TweenLite.to(m,0,{x:-1*u}),d(),e()}function d(){q=Rx.Observable.fromEvent(window,"resize").throttle(10).subscribe(function(){e()}),n&&(o=Rx.Observable.fromEvent(n,"change").subscribe(function(){j()}))}function e(){f(),g()}function f(){w={width:window.innerWidth,height:window.innerHeight}}function g(){w.width<=s||y.mobile.any()?h():w.width>s&&i()}function h(){r||(r=!0,x.viewChangedToMobile())}function i(){r&&(r=!1,l(),x.viewChangedToDesktop())}function j(){v?l():k()}function k(){v=!0,TweenLite.to(m,.5,{x:0,ease:Quad.easeOut}),TweenLite.to(p,.5,{x:u,ease:Quad.easeOut})}function l(){v=!1,TweenLite.to(m,.5,{x:-1*u,ease:Quad.easeOut}),TweenLite.to(p,.5,{x:0,ease:Quad.easeOut})}var m,n,o,p,q,r,s,t,u,v,w,x=a("nori/events/EventCreator"),y=a("nudoru/browser/BrowserInfo");b.exports.initializeMultiDeviceView=c,b.exports.openDrawer=k,b.exports.closeDrawer=l,b.exports.checkForMobile=g}),define("nori/view/ViewComponent",function(a,b){function c(a){u()||(E=a,F=a.id,G=a.template,J=a.mountPoint),this.update(),K=!0}function d(a){Nori.bindToMap(a,this.getID())}function e(a){M.push(a)}function f(a){var b=M.indexOf(a);M[b].dispose(),M.splice(b,1)}function g(){}function h(){var a=_.assign({},this.getState());this.viewWillUpdate(),M.forEach(function(a){a.update()}),N&&this.viewShouldRender(a)&&(this.unmount(),this.render(),this.mount()),this.viewDidUpdate()}function i(a){return this.getState()===a}function j(){}function k(){}function l(){this.viewWillRender&&this.viewWillRender(),M.forEach(function(a){a.render()}),H=G(L),this.viewDidRender&&this.viewDidRender()}function m(){}function n(){}function o(){if(!H)throw new Error("Component "+F+" cannot mount with no HTML. Call render() first");this.viewWillMount&&this.viewWillMount(),N=!0,O.renderView(J,H,F,p.bind(this))}function p(a){A(a),this.delegateEvents&&this.delegateEvents(),this.viewDidMount&&this.viewDidMount()}function q(){}function r(){}function s(){this.viewWillUnmount(),N=!1,O.renderView(J,"",F),this.undelegateEvents&&this.undelegateEvents(),A(null),this.viewDidUnmount()}function t(){}function u(){return K}function v(a){L=a}function w(){return _.cloneDeep(L)}function x(){return F}function y(){return G}function z(){return I}function A(a){I=a}function B(){return H}function C(a){H=a}function D(){return M.slice(0)}var E,F,G,H,I,J,K=!1,L={},M=[],N=!1,O=a("nori/events/EventCreator");b.exports.initializeComponent=c,b.exports.isInitialized=u,b.exports.setState=v,b.exports.getState=w,b.exports.getID=x,b.exports.getTemplate=y,b.exports.getHTML=B,b.exports.setHTML=C,b.exports.getDOMElement=z,b.exports.setDOMElement=A,b.exports.bindMap=d,b.exports.viewWillUpdate=g,b.exports.update=h,b.exports.viewDidUpdate=j,b.exports.viewShouldRender=i,b.exports.viewWillRender=k,b.exports.render=l,b.exports.viewDidRender=m,b.exports.viewWillMount=n,b.exports.mount=o,b.exports.viewDidMount=q,b.exports.viewWillUnmount=r,b.exports.unmount=s,b.exports.viewDidUnmount=t,b.exports.addChild=e,b.exports.removeChild=f,b.exports.getChildren=D});var Nori=function(){function a(){return G}function b(){return H}function c(){return z}function d(){return A}function e(){return F.extend({},y)}function f(){return _.merge({},y.currentRoute)}function g(a){h(),H.initialize(),A=a.view?a.view:x({}),z=a.model?a.model:w({}),i(),C.applicationInitialized()}function h(){y={appConfig:window.APP_CONFIG_DATA||{},routes:[],currentRoute:{route:"/",data:void 0}}}function i(){G.subscribe(D.MODEL_DATA_CHANGED,function(a){m(a.payload)}),G.subscribe(E.URL_HASH_CHANGED,function(a){q(a.payload.routeObj)}),G.subscribe(D.CHANGE_ROUTE,function(a){a.payload.fromApp=!0,q(a.payload)})}function j(a){isFunction(a.then);var b=function(){return arguments.length&&(a=arguments[0]),a};return b.toJSON=function(){return a},b}function k(a,b,c){return function(d){d=d||event;var e=d.currentTarget||this,f=c||this;b.call(f,a in e?e[a]:e.getAttribute(a))}}function l(a,b){if(!a||!b)throw new Error("Nori, bindToMap: Model ID and View ID must be defined.",a,b);var c=B[a];c?-1===c.indexOf(b)&&c.push(b):c=[b],B[a]=c}function m(a){n(a.id)}function n(a){var b=B[a];b&&b.forEach(function(a){A.updateViewComponent(a)})}function o(a){y.routes.push(a)}function p(a){return y.routes.indexOf(a)>-1}function q(a){p(a.route)?(y.currentRoute=a,a.fromApp?H.setRoute(y.currentRoute.route,y.currentRoute.data):(H.runCurrentRoute(),C.routeChanged(a))):H.setRoute(y.currentRoute.route,y.currentRoute.data)}function r(a,b,c){o(a),A.mapRouteToViewComponent(b,c),H.when(a,{templateID:b,controller:function(a){s(a)}})}function s(a){A.showRouteViewComponent(a)}function t(a,b){return _.assign({},a,b)}function u(a,b){for(;b.length;)a=_.assign(a,b.shift());return a}function v(a){return u({},[this,a])}function w(a){return u({},[require("nori/model/ApplicationModel"),require("nori/model/MixinReducerModel"),a])}function x(a){return u({},[require("nori/view/ApplicationView"),require("nori/view/MixinComponentViews"),requireNew("nori/view/MixinEventDelegator"),a])}var y,z,A,B=Object.create(null),C=require("nori/events/EventCreator"),D=require("nori/events/EventConstants"),E=require("nudoru/browser/EventConstants"),F=require("nudoru/core/ObjectUtils"),G=require("nori/utils/Dispatcher"),H=require("nori/utils/Router");return{initializeApplication:g,config:e,dispatcher:a,router:b,model:c,view:d,createApplication:v,createApplicationModel:w,createApplicationView:x,setCurrentRoute:q,getCurrentRoute:f,mapRouteToViewComponent:r,extend:t,extendWithArray:u,bindToMap:l,handleModelUpdate:m,prop:j,withAttr:k}}();