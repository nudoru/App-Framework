/*! app-framework 04-06-2015 */
define("nudoru.events.ComponentEvents",function(a,b,c){c.MODAL_COVER_SHOW="MODAL_COVER_SHOW",c.MODAL_COVER_HIDE="MODAL_COVER_HIDE",c.MENU_SELECT="MENU_SELECT"}),define("nudoru.components.ComponentViewUtils",function(a,b,c){function d(a){TweenLite.set(a,{css:{perspective:800,perspectiveOrigin:"50% 50%"}})}function e(a){TweenLite.set(a,{css:{transformStyle:"preserve-3d",backfaceVisibility:"hidden",transformOrigin:"50% 50%"}})}function f(a){TweenLite.set(a,{css:{transformStyle:"preserve-3d",backfaceVisibility:"hidden",transformPerspective:600,transformOrigin:"50% 50%"}})}c.apply3DToContainer=d,c.apply3DToComponentElement=e,c.applyUnique3DToComponentElement=f}),define("nudoru.events.Emitter",function(a,b,c){function d(a,b,c){return h[a]||(h[a]=[]),h[a]={once:c,handler:b,subject:new Rx.Subject},h[a].subject.subscribe(b)}function e(b,c,e){var f=a(c);if(f.hasOwnProperty("execute"))return d(b,f.execute,e);throw new Error("Emitter cannot map "+b+" to command "+c+": must have execute()")}function f(a,b){var c=h[a];c&&(c.subject.onNext(b),c.once&&(c.subject.onCompleted(),c.subject.dispose(),c=null))}function g(){var a=h;for(var b in a)hasOwnProp.call(a,b)&&a[b].subject.dispose();h={}}var h={};c.subscribe=d,c.subscribeCommand=e,c.publish=f,c.dispose=g}),define("nudoru.components.MessageBoxView",function(a,b,c){function d(a){o=document.getElementById(a)}function e(a){var b=a.type||t.DEFAULT,c=g(a);return p.push(c),o.appendChild(c.element),f(b,c.element),h(c),B.applyUnique3DToComponentElement(c.element),TweenLite.set(c.element,{css:{zIndex:r,width:a.width?a.width:s}}),A.centerElementInViewPort(c.element),Draggable.create("#"+c.id,{bounds:window,onPress:function(){r=Draggable.zIndex}}),j(c.element),a.modal&&y.showHard(!0),c.id}function f(a,b){"default"!==a&&A.addClass(b,u[a])}function g(a){var b="js__messagebox-"+(q++).toString(),c={dataObj:a,id:b,modal:a.modal,element:x.asElement("template__messagebox--default",{id:b,title:a.title,content:a.content}),streams:[]};return c}function h(a){var b=a.dataObj.buttons;b||(b=[{label:"Close",type:"",icon:"times",id:"default-close"}]);var c=a.element.querySelector(".footer-buttons");A.removeAllElements(c),b.forEach(function(b){b.id=a.id+"-button-"+b.id;var d;d=b.hasOwnProperty("icon")?x.asElement(v,b):x.asElement(w,b),c.appendChild(d);var e=Rx.Observable.fromEvent(d,z.mouseClickEvtStr()).subscribe(function(){b.hasOwnProperty("onClick")&&b.onClick.call(this),i(a.id)});a.streams.push(e)})}function i(a){var b,c=n(a);c>-1&&(b=p[c],k(b.element))}function j(a){TweenLite.to(a,0,{alpha:0,rotationX:45,scale:2}),TweenLite.to(a,.5,{alpha:1,rotationX:0,scale:1,ease:Circ.easeOut})}function k(a){TweenLite.to(a,.25,{alpha:0,rotationX:-45,scale:.25,ease:Circ.easeIn,onComplete:function(){l(a)}})}function l(a){var b=n(a.getAttribute("id")),c=p[b];c.streams.forEach(function(a){a.dispose()}),Draggable.get("#"+c.id).disable(),o.removeChild(a),p[b]=null,p.splice(b,1),m()}function m(){var a=!1;p.forEach(function(b){b.modal===!0&&(a=!0)}),a||y.hide(!0)}function n(a){return p.map(function(a){return a.id}).indexOf(a)}var o,p=[],q=0,r=1e3,s=400,t={DEFAULT:"default",INFORMATION:"information",SUCCESS:"success",WARNING:"warning",DANGER:"danger"},u={"default":"",information:"messagebox__information",success:"messagebox__success",warning:"messagebox__warning",danger:"messagebox__danger"},v="template__messagebox--button-icon",w="template__messagebox--button-noicon",x=a("nudoru.utils.NTemplate"),y=a("nudoru.components.ModalCoverView"),z=a("nudoru.utils.BrowserInfo"),A=a("nudoru.utils.DOMUtils"),B=a("nudoru.components.ComponentViewUtils");c.initialize=d,c.add=e,c.remove=i,c.type=function(){return t}}),define("nudoru.components.ModalCoverView",function(a,b,c){function d(){o=!0,k=q.getElementById("modal__cover"),l=q.querySelector(".modal__background"),m=q.querySelector(".modal__close-button");var a=Rx.Observable.fromEvent(l,t.mouseClickEvtStr()),b=Rx.Observable.fromEvent(m,t.mouseClickEvtStr());n=Rx.Observable.merge(a,b).subscribe(function(){f()}),j(!1)}function e(){return o}function f(){p||j(!0)}function g(a){o=!0;var b=a?.25:0;TweenLite.to(k,b,{autoAlpha:1,ease:Quad.easeOut})}function h(a){o||(p=!1,g(a),TweenLite.to(m,2*duration,{autoAlpha:1,top:22,ease:Back.easeOut,delay:2}),r.publish(s.MODAL_COVER_SHOW))}function i(a){o||(p=!0,g(a),TweenLite.to(m,0,{autoAlpha:0}))}function j(a){if(o){o=!1,p=!1;var b=a?.25:0;TweenLite.killDelayedCallsTo(m),TweenLite.to(k,b,{autoAlpha:0,ease:Quad.easeOut}),TweenLite.to(m,b/2,{autoAlpha:0,top:-50,ease:Quad.easeOut}),r.publish(s.MODAL_COVER_HIDE)}}var k,l,m,n,o,p,q=document,r=a("nudoru.events.Emitter"),s=a("nudoru.events.ComponentEvents"),t=a("nudoru.utils.BrowserInfo");c.initialize=d,c.show=h,c.showHard=i,c.hide=j,c.visible=e}),define("nudoru.utils.NTemplate",function(a,b,c){function d(a){if(i[a])return i[a];var b=document.getElementById(a),c="",d="";if(!b)throw new Error('nudoru.utils.NTemplate, template not found: "'+a+'"');return c=b.innerHTML,d=h(c),i[a]=d,d}function e(a){if(j[a])return j[a];var b=_.template(d(a));return j[a]=b,b}function f(a,b){var c=e(a);return c(b)}function g(a,b){return k.HTMLStrToNode(f(a,b))}function h(a){return a.trim()}var i=Object.create(null),j=Object.create(null),k=a("nudoru.utils.DOMUtils");c.getSource=d,c.getTemplate=e,c.asHTML=f,c.asElement=g}),define("nudoru.components.ToastView",function(a,b,c){function d(a){n=document.getElementById(a)}function e(a){a.type=a.type||r.DEFAULT;var b=g(a.title,a.content);o.push(b),n.insertBefore(b.element,n.firstChild),f(a.type,b.element),w.apply3DToContainer(n),w.apply3DToComponentElement(b.element);var c=b.element.querySelector(".toast__item-controls > button"),d=Rx.Observable.fromEvent(c,u.mouseClickEvtStr()),e=Rx.Observable.interval(q);return b.defaultButtonStream=Rx.Observable.merge(d,e).take(1).subscribe(function(){h(b.id)}),i(b.element),b.id}function f(a,b){"default"!==a&&v.addClass(b,s[a])}function g(a,b){var c="js__toast-toastitem-"+(p++).toString(),d={id:c,element:t.asElement("template__component--toast",{id:c,title:a,message:b}),defaultButtonStream:null};return d}function h(a){var b,c=m(a);c>-1&&(b=o[c],l(c),j(b.element))}function i(a){TweenLite.to(a,0,{alpha:0}),TweenLite.to(a,1,{alpha:1,ease:Quad.easeOut}),l()}function j(a){TweenLite.to(a,.25,{rotationX:-45,alpha:0,ease:Quad.easeIn,onComplete:function(){k(a)}})}function k(a){var b=m(a.getAttribute("id")),c=o[b];c.defaultButtonStream.dispose(),n.removeChild(a),o[b]=null,o.splice(b,1)}function l(a){for(var b,c=o.length-1,d=0;c>-1;c--)c!==a&&(b=o[c],TweenLite.to(b.element,.75,{y:d,ease:Bounce.easeOut}),d+=10+b.element.clientHeight)}function m(a){return o.map(function(a){return a.id}).indexOf(a)}var n,o=[],p=0,q=7e3,r={DEFAULT:"default",INFORMATION:"information",SUCCESS:"success",WARNING:"warning",DANGER:"danger"},s={"default":"",information:"toast__information",success:"toast__success",warning:"toast__warning",danger:"toast__danger"},t=a("nudoru.utils.NTemplate"),u=a("nudoru.utils.BrowserInfo"),v=a("nudoru.utils.DOMUtils"),w=a("nudoru.components.ComponentViewUtils");c.initialize=d,c.add=e,c.remove=h,c.type=function(){return r}}),define("nudoru.components.ToolTipView",function(a,b,c){function d(a){t=document.getElementById(a)}function e(a){a.type=a.type||y.DEFAULT;var b=g(a.title,a.content,a.position,a.targetEl);return u.push(b),t.appendChild(b.element),b.arrowEl=b.element.querySelector(".arrow"),f(a.type,a.position,b.element),E.apply3DToContainer(t),E.apply3DToComponentElement(b.element),TweenLite.set(b.element,{css:{autoAlpha:0,width:a.width?a.width:w}}),b.width=b.element.getBoundingClientRect().width,b.height=b.element.getBoundingClientRect().height,TweenLite.set(b.element,{css:{rotationX:x}}),h(b),j(b),(b.position===A.L||b.position===A.R)&&l(b),(b.position===A.T||b.position===A.B)&&k(b),b.id}function f(a,b,c){"default"!==a&&D.addClass(c,z[a]),D.addClass(c,B[b])}function g(a,b,c,d){var e="js__tooltip-tooltipitem-"+(v++).toString(),f={id:e,position:c,targetEl:d,elOverStream:null,elOutStream:null,height:0,width:0,element:C.asElement("template__component--tooltip",{id:e,title:a,message:b}),arrowEl:null};return f}function h(a){a.elOverStream=Rx.Observable.fromEvent(a.targetEl,"mouseover").subscribe(function(){i(a.id)}),a.elOutStream=Rx.Observable.fromEvent(a.targetEl,"mouseout").subscribe(function(){m(a.id)})}function i(a){var b=q(a);j(b),n(b.element)}function j(a){var b=15,c=0,d=0,e="50%",f="50%",g=a.targetEl.getBoundingClientRect();a.position===A.TL?(c=g.left-a.width,d=g.top-a.height,e="100%",f="100%"):a.position===A.T?(c=g.left+(g.width/2-a.width/2),d=g.top-a.height-b,e="50%",f="100%"):a.position===A.TR?(c=g.right,d=g.top-a.height,e="0%",f="100%"):a.position===A.R?(c=g.right+b,d=g.top+(g.height/2-a.height/2),e="0%",f="50%"):a.position===A.BR?(c=g.right,d=g.bottom,e="0%",f="0%"):a.position===A.B?(c=g.left+(g.width/2-a.width/2),d=g.bottom+b,e="50%",f="0%"):a.position===A.BL?(c=g.left-a.width,d=g.bottom,e="100%",f="0%"):a.position===A.L&&(c=g.left-a.width-b,d=g.top+(g.height/2-a.height/2),e="100%",f="50%"),TweenLite.set(a.element,{x:c,y:d,transformOrigin:e+" "+f})}function k(a){var b=a.arrowEl.getBoundingClientRect();TweenLite.set(a.arrowEl,{x:a.width/2-b.width/2})}function l(a){var b=a.arrowEl.getBoundingClientRect();TweenLite.set(a.arrowEl,{y:a.height/2-b.height/2-2})}function m(a){var b=q(a);o(b.element)}function n(a){TweenLite.to(a,.25,{autoAlpha:1,rotationX:0,scaleY:1,ease:Circ.easeOut})}function o(a){TweenLite.to(a,.5,{rotationX:x,autoAlpha:0,scaleY:1,ease:Circ.easeIn})}function p(a){s(a).forEach(function(a){a.elOverStream.dispose(),a.elOutStream.dispose(),t.removeChild(a.element);var b=r(a.id);u[b]=null,u.splice(b,1)})}function q(a){return u.filter(function(b){return b.id===a})[0]}function r(a){return u.map(function(a){return a.id}).indexOf(a)}function s(a){return u.filter(function(b){return b.targetEl===a})}var t,u=[],v=0,w=200,x=-20,y={DEFAULT:"default",INFORMATION:"information",SUCCESS:"success",WARNING:"warning",DANGER:"danger"},z={"default":"",information:"tooltip__information",success:"tooltip__success",warning:"tooltip__warning",danger:"tooltip__danger"},A={T:"T",TR:"TR",R:"R",BR:"BR",B:"B",BL:"BL",L:"L",TL:"TL"},B={T:"tooltip__top",TR:"tooltip__topright",R:"tooltip__right",BR:"tooltip__bottomright",B:"tooltip__bottom",BL:"tooltip__bottomleft",L:"tooltip__left",TL:"tooltip__topleft"},C=a("nudoru.utils.NTemplate"),D=a("nudoru.utils.DOMUtils"),E=a("nudoru.components.ComponentViewUtils");c.initialize=d,c.add=e,c.remove=p,c.type=function(){return y},c.position=function(){return A}});